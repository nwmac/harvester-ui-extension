(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_4_0"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_4_0"]||[]).push([[326],{87132:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C},ksmtunedMode:function(){return k},ksmtunedRunOption:function(){return w}});var o=a(9274);const s={class:"row"},l={class:"col span-6"},r={class:"col span-6"},n={class:"row"},i={class:"col span-6"},d={class:"col span-6"},u={class:"row"},c={class:"col span-6"};function p(e,t,a,p,m,v){const h=(0,o.resolveComponent)("LabeledSelect"),f=(0,o.resolveComponent)("UnitInput"),y=(0,o.resolveComponent)("Checkbox"),b=(0,o.resolveComponent)("t"),g=(0,o.resolveComponent)("RadioGroup"),k=(0,o.resolveComponent)("LabeledInput");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(h,{value:m.spec.run,"onUpdate:value":t[0]||(t[0]=e=>m.spec.run=e),label:e.t("harvester.host.ksmtuned.run"),options:m.ksmtunedRunOption,class:"mb-20",mode:a.mode,required:""},null,8,["value","label","options","mode"]),v.showKsmt?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createVNode)(f,{value:m.spec.thresCoef,"onUpdate:value":t[1]||(t[1]=e=>m.spec.thresCoef=e),valueModifiers:{number:!0},label:e.t("harvester.host.ksmtuned.thresCoef"),suffix:"%",delay:0,required:"",mode:a.mode,class:"mb-20"},null,8,["value","label","mode"]),(0,o.createVNode)(y,{value:m.enableMergeAcrossNodes,"onUpdate:value":t[2]||(t[2]=e=>m.enableMergeAcrossNodes=e),mode:a.mode,class:"check mb-20",type:"checkbox",label:e.t("harvester.host.ksmtuned.enableMergeNodes")},null,8,["value","mode","label"]),(0,o.createElementVNode)("h3",null,[(0,o.createVNode)(b,{k:"harvester.host.ksmtuned.modeLink",raw:!0,url:v.ksmtunedLink},null,8,["url"])]),(0,o.createVNode)(g,{value:m.spec.mode,"onUpdate:value":t[3]||(t[3]=e=>m.spec.mode=e),class:"mb-20",name:e.t("harvester.host.ksmtuned.mode"),options:m.ksmtunedMode},null,8,["value","name","options"]),v.isCustomizedMode?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(k,{value:m.spec.ksmtunedParameters.boost,"onUpdate:value":t[4]||(t[4]=e=>m.spec.ksmtunedParameters.boost=e),valueModifiers:{number:!0},required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.boost"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.boost"),class:"mb-20",mode:a.mode},null,8,["value","label","tooltip","mode"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(k,{value:m.spec.ksmtunedParameters.decay,"onUpdate:value":t[5]||(t[5]=e=>m.spec.ksmtunedParameters.decay=e),valueModifiers:{number:!0},required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.decay"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.decay"),class:"mb-20",mode:a.mode},null,8,["value","label","tooltip","mode"])])]),(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(k,{value:m.spec.ksmtunedParameters.minPages,"onUpdate:value":t[6]||(t[6]=e=>m.spec.ksmtunedParameters.minPages=e),valueModifiers:{number:!0},required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.minPages"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.minPages"),class:"mb-20",mode:a.mode},null,8,["value","label","tooltip","mode"])]),(0,o.createElementVNode)("div",d,[(0,o.createVNode)(k,{value:m.spec.ksmtunedParameters.maxPages,"onUpdate:value":t[7]||(t[7]=e=>m.spec.ksmtunedParameters.maxPages=e),valueModifiers:{number:!0},required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.maxPages"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.maxPages"),class:"mb-20",mode:a.mode},null,8,["value","label","tooltip","mode"])])]),(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("div",c,[(0,o.createVNode)(k,{value:m.spec.ksmtunedParameters.sleepMsec,"onUpdate:value":t[8]||(t[8]=e=>m.spec.ksmtunedParameters.sleepMsec=e),valueModifiers:{number:!0},required:"",type:"number",label:e.t("harvester.host.ksmtuned.parameters.sleepMsec"),tooltip:e.t("harvester.host.ksmtuned.parameters.description.sleepMsec"),class:"mb-20",mode:a.mode},null,8,["value","label","tooltip","mode"])])])],64)):(0,o.createCommentVNode)("",!0)],64)):(0,o.createCommentVNode)("",!0)])}var m=a(91847),v=a(83652),h=a(37814),f=a(92132),y=a(74056),b=a(32766),g=a(66242);const k=[{value:"standard",label:"Standard"},{value:"high",label:"High-Perfomanace"},{value:"customized",label:"Customized"}],w=[{label:"Run",value:"run"},{label:"Stop",value:"stop"},{label:"Prune",value:"prune"}];var N={name:"HarvesterKsmtuned",components:{Checkbox:y.S,LabeledInput:v.o,LabeledSelect:m.A,RadioGroup:f.z,UnitInput:h.A},props:{mode:{type:String,required:!0},node:{type:Object,required:!0},registerBeforeHook:{type:Function,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(`${e}/findAll`,{type:b.rk.KSTUNED});this.ksmtuned=t.find((e=>e.id===this.node.id)),this.enableMergeAcrossNodes=!!this.ksmtuned.spec?.mergeAcrossNodes,this.spec=this.ksmtuned.spec},data(){return{ksmtuned:{},spec:{},thresCoef:30,ksmtunedMode:k,ksmtunedRunOption:w,enableMergeAcrossNodes:!0}},created(){this.registerBeforeHook(this.saveKsmtuned,"saveKsmtuned")},computed:{isCustomizedMode(){return"customized"===this.spec.mode},showKsmt(){return"run"===this.spec.run},ksmtunedLink(){return g.T.KSMTUNED_MODE}},methods:{async saveKsmtuned(){this.spec.mergeAcrossNodes=this.enableMergeAcrossNodes?1:0,this.ksmtuned["spec"]=this.spec,await this.ksmtuned.save().catch((e=>{if("error"===e?.type)return this.$store.dispatch("growl/error",{title:this.t("harvester.notification.title.error"),message:e?.message},{root:!0}),Promise.reject(new Error("saveKsmtuned error"))}))}}},E=a(47433);const V=(0,E.A)(N,[["render",p]]);var C=V},58094:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var o=a(9274);const s={class:"vm__credentials-users"};function l(e,t,a,l,r,n){const i=(0,o.resolveComponent)("LabeledSelect"),d=(0,o.resolveComponent)("LabeledInput"),u=(0,o.resolveComponent)("ModalWithCard");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createVNode)(i,{value:r.selectedUser,"onUpdate:value":t[0]||(t[0]=e=>r.selectedUser=e),options:a.userOptions,label:e.t("harvester.virtualMachine.accessCredentials.injectSSH.users"),taggable:a.multiple,mode:a.mode,multiple:a.multiple,searchable:!1,tooltip:e.t("harvester.virtualMachine.accessCredentials.userTips"),class:(0,o.normalizeClass)({hasUsers:r.selectedUser.length>0}),onInput:n.update},null,8,["value","options","label","taggable","mode","multiple","tooltip","class","onInput"]),r.isOpen?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,name:r.randomStr,width:"40%",errors:r.errors,onFinish:n.addUser,onClose:n.cancel},{title:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser")),1)])),content:(0,o.withCtx)((()=>[(0,o.createVNode)(d,{value:r.newUsername,"onUpdate:value":t[1]||(t[1]=e=>r.newUsername=e),label:e.t("harvester.virtualMachine.input.username"),class:"mb-20",required:"",onKeydown:t[2]||(t[2]=(0,o.withKeys)((0,o.withModifiers)((()=>{}),["prevent"]),["native","enter"]))},null,8,["value","label"])])),_:1},8,["name","errors","onFinish","onClose"])):(0,o.createCommentVNode)("",!0)])}var r=a(65359),n=a(38228),i=a(13451),d=a(83652),u=a(91847),c=a(85);const p="_NEW";var m={emits:["update:user","update:newUser"],components:{LabeledInput:d.o,LabeledSelect:u.A,ModalWithCard:c.A},props:{value:{type:[Array,String],default:()=>[]},resourceType:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{selectedUser:this.value,newUsername:"",randomStr:(0,i.vx)(5).toLowerCase(),errors:[],isOpen:!1}},computed:{...(0,r.L8)({t:"i18n/t"})},watch:{value(e){this.selectedUser=e},selectedUser(e,t){e.includes(p)&&(this["selectedUser"]=t,this.update(),this.show())}},methods:{update(){this.$emit("update:user",(0,n.o8)(this.selectedUser))},addUser(e){const t=/^[-._0-9a-zA-Z]+$/;if(this.errors=[],!t.test(this.newUsername)){const t=this.t("harvester.virtualMachine.accessCredentials.invalidUser");return this.errors.push(t),void e(!1)}if(this.userOptions.includes(this.newUsername)){const t=this.t("harvester.virtualMachine.accessCredentials.duplicatedUser");return this.errors.push(t),void e(!1)}this.multiple?this.selectedUser.push(this.newUsername):this.selectedUser=this.newUsername,this.$emit("update:newUser",this.newUsername),this.update(),e(!0),this.cancel()},show(){this.isOpen=!0},hide(){this.isOpen=!1},cancel(){this.hide(),this.newUsername=""}}},v=(a(84388),a(47433));const h=(0,v.A)(m,[["render",l]]);var f=h},60068:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var o=a(9274);const s=e=>((0,o.pushScopeId)("data-v-61977bc4"),e=e(),(0,o.popScopeId)(),e),l=["onClick"],r=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-x"},null,-1))),n=[r],i={key:0,class:"mt-20"};function d(e,t,a,s,r,d){const u=(0,o.resolveComponent)("Banner"),c=(0,o.resolveComponent)("InfoBox");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(u,{class:"mb-20",color:"info",label:e.t("harvester.virtualMachine.accessCredentials.tips")},null,8,["label"]),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.rows,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t},[(0,o.createVNode)(c,{class:"volume-source"},{default:(0,o.withCtx)((()=>[d.isEdit?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"role-link btn btn-sm remove-vol",onClick:t=>d.remove(e)},n,8,l)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("h3",null,[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(d.headerFor(e.source)),1)]),(0,o.createElementVNode)("div",null,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(d.componentFor(e.source)),{value:r.rows[t],"onUpdate:value":e=>r.rows[t]=e,rows:r.rows,"resource-type":a.resourceType,"user-options":d.userOptions,mode:a.mode,idx:t,onUpdate:d.update,"onUpdate:newUser":d.updateNewUser},null,40,["value","onUpdate:value","rows","resource-type","user-options","mode","idx","onUpdate","onUpdate:newUser"]))])])),_:2},1024)])))),128)),d.isEdit&&a.isQemuInstalled?((0,o.openBlock)(),(0,o.createElementBlock)("div",i,[(0,o.createElementVNode)("button",{type:"button",class:"btn btn-sm bg-primary mr-15 mb-10",onClick:t[0]||(t[0]=e=>d.addCredentials(r.ACCESS_CREDENTIALS.RESET_PWD))},(0,o.toDisplayString)(e.t("harvester.virtualMachine.accessCredentials.resetPwd.label")),1),(0,o.createElementVNode)("button",{type:"button",class:"btn btn-sm bg-primary mr-15 mb-10",onClick:t[1]||(t[1]=e=>d.addCredentials(r.ACCESS_CREDENTIALS.INJECT_SSH))},(0,o.toDisplayString)(e.t("harvester.virtualMachine.accessCredentials.injectSSH.label")),1)])):(0,o.createCommentVNode)("",!0)])}var u=a(65359),c=a(40780),p=a(88289),m=a(13451),v=a(931),h=a(53548),f=a(2602),y=a(66905);const b="_NEW";var g={emits:["update:value"],components:{Banner:c.l,InfoBox:p.A},props:{value:{type:Array,default:()=>[]},resourceType:{type:Object,default:()=>({})},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isQemuInstalled:{type:Boolean,default:!1}},data(){return{ACCESS_CREDENTIALS:y.cI,toRemove:[],toSave:[],rows:[],newUserOptions:[]}},computed:{...(0,u.L8)({t:"i18n/t"}),isEdit(){return this.mode===h.G5},historyUsersOptions(){const e=JSON.parse(this.resourceType?.spec?.template?.metadata?.annotations?.[f.r.DYNAMIC_SSHKEYS_USERS]||"[]");return e.unshift({label:this.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser"),value:b}),e},userOptions(){return Array.from(new Set([...this.historyUsersOptions,...this.newUserOptions]))}},watch:{value:{handler(e){this.rows=[...e]},deep:!0,immediate:!0}},methods:{addCredentials(e){const t={source:e,users:[],sshkeys:[],username:"",newPassword:"",secretName:this.generateSecretName(this.resourceType.metadata.name)};this.rows.push(t),this.update()},remove(e){(0,v.Gj)(this.rows,e),this.update()},update(){this.$emit("update:value",this.rows)},updateNewUser(e){this.newUserOptions.push(e)},generateSecretName(e){return e?`${e}-${(0,m.vx)(5).toLowerCase()}`:void 0},componentFor(e){switch(e){case y.cI.RESET_PWD:return a(23574)["default"];case y.cI.INJECT_SSH:return a(18933)["default"]}},headerFor(e){return{userPassword:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.resetPwd.label"),sshPublicKey:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.injectSSH.label")}[e]}}},k=(a(38239),a(47433));const w=(0,k.A)(g,[["render",d],["__scopeId","data-v-61977bc4"]]);var N=w},23574:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var o=a(9274);const s={class:"col span-6"},l={class:"col span-6"};function r(e,t,a,r,n,i){const d=(0,o.resolveComponent)("AccessCredentialsUsers"),u=(0,o.resolveComponent)("Password");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"row","onUpdate:value":t[2]||(t[2]=(...e)=>i.update&&i.update(...e))},[(0,o.createElementVNode)("div",s,[(0,o.createVNode)(d,{value:a.value.username,"onUpdate:value":t[0]||(t[0]=e=>a.value.username=e),"resource-type":a.resourceType,"user-options":a.userOptions,multiple:!1,mode:a.mode,"onUpdate:user":i.updateUser,"onUpdate:newUser":i.updateNewUser},null,8,["value","resource-type","user-options","mode","onUpdate:user","onUpdate:newUser"])]),(0,o.createElementVNode)("div",l,[(0,o.createVNode)(u,{ref:"password",value:a.value.newPassword,"onUpdate:value":t[1]||(t[1]=e=>a.value.newPassword=e),mode:a.mode,disabled:"edit"!==a.mode,label:e.t("harvester.virtualMachine.input.password"),required:""},null,8,["value","mode","disabled","label"])])],32)}var n=a(47135),i=a(58094),d={name:"HarvesterEditVolume",emits:["update","update:newUser"],components:{Password:n.A,AccessCredentialsUsers:i["default"]},props:{mode:{type:String,default:"create"},resourceType:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})}},data(){return{defaultPwdValue:{username:"",newPassword:""}}},methods:{update(){this.$emit("update")},updateUser(e){this.value["username"]=e,this.update()},updateNewUser(e){this.$emit("update:newUser",e)}}},u=(a(27461),a(47433));const c=(0,u.A)(d,[["render",r],["__scopeId","data-v-7d19b7bd"]]);var p=c},18933:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var o=a(9274);const s={class:"columns row"},l={class:"col span-6"},r={class:"col span-6"};function n(e,t,a,n,i,d){const u=(0,o.resolveComponent)("AccessCredentialsUsers"),c=(0,o.resolveComponent)("SSHKey");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(u,{value:a.value.users,"onUpdate:value":t[0]||(t[0]=e=>a.value.users=e),"resource-type":a.resourceType,"user-options":a.userOptions,mode:a.mode,multiple:!0,"onUpdate:user":d.updateUser,"onUpdate:newUser":d.updateNewUser},null,8,["value","resource-type","user-options","mode","onUpdate:user","onUpdate:newUser"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(c,{value:a.value.sshkeys,"onUpdate:value":t[1]||(t[1]=e=>a.value.sshkeys=e),class:"mb-20",namespace:a.resourceType.metadata.namespace,mode:a.mode,searchable:!1,"onUpdate:sshKey":d.updateSSH},null,8,["value","namespace","mode","onUpdate:sshKey"])])])])}var i=a(78025),d=a(58094),u={name:"HarvesterEditVolume",emits:["update","update:newUser"],components:{SSHKey:i["default"],AccessCredentialsUsers:d["default"]},props:{mode:{type:String,default:"create"},resourceType:{type:Object,default:()=>({})},userOptions:{type:Array,default:()=>[]},value:{type:Object,default:()=>({})}},methods:{update(){this.$emit("update")},updateUser(e){this.value["users"]=e,this.update()},updateSSH(e){this.value["sshkeys"]=e,this.update()},updateNewUser(e){this.$emit("update:newUser",e)}}},c=a(47433);const p=(0,c.A)(u,[["render",n]]);var m=p},16369:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var o=a(9274);const s={class:"mb-20"},l={class:"text-muted mb-20"},r={class:"resource-yaml"};function n(e,t,a,n,i,d){const u=(0,o.resolveComponent)("t"),c=(0,o.resolveComponent)("LabeledSelect"),p=(0,o.resolveComponent)("YamlEditor");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("h3",null,(0,o.toDisplayString)(e.t(`harvester.virtualMachine.cloudConfig.${a.type}.title`)),1),(0,o.createElementVNode)("p",l,[(0,o.createVNode)(u,{k:`harvester.virtualMachine.cloudConfig.${a.type}.tip`,raw:!0},null,8,["k"])]),d.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,value:i.id,"onUpdate:value":t[0]||(t[0]=e=>i.id=e),class:"mb-20",options:a.options,disabled:a.viewCode,"label-key":`harvester.virtualMachine.cloudConfig.${a.type}.label`},null,8,["value","options","disabled","label-key"])),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(p,{ref:"yaml",value:i.yamlScript,"onUpdate:value":t[1]||(t[1]=e=>i.yamlScript=e),class:"yaml-editor","editor-mode":d.editorMode},null,8,["value","editor-mode"])])])}var i=a(65359),d=a(91847),u=a(86621),c=a(53548),p=a(45360);const m="_NEW",v="_NONE";var h={components:{YamlEditor:u.A,LabeledSelect:d.A},emits:["updateTemplateId","show","update"],props:{mode:{type:String,default:"create"},value:{type:String,default:""},type:{type:String,default:""},options:{type:Array,default:()=>[]},configId:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data(){return{id:"",yamlScript:this.value}},computed:{...(0,i.L8)({t:"i18n/t"}),editorMode(){return this.isView||this.viewCode?u.j.VIEW_CODE:u.j.EDIT_CODE},isView(){return this.mode===c.nW}},watch:{value(e){this.yamlScript=e},configId(e){this.id=this.configId},id(e,t){const a=this.$store.getters["harvester/byId"](p.K5,e)?.data?.cloudInit||"";if(this.$emit("updateTemplateId",this.type,e),e){if(e===m)return this.$emit("show",this.type),void(this.id=t);this.yamlScript=e===v?"":a,this.$refs["yaml"].updateValue(a)}},yamlScript(e){this.$emit("update",e,this.type)}},methods:{refresh(){this.$refs.yaml.refresh()},updateValue(){this.$refs["yaml"].updateValue(this.value)}}},f=(a(71157),a(47433));const y=(0,f.A)(h,[["render",n],["__scopeId","data-v-1613a356"]]);var b=y},81559:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var o=a(9274);const s={key:0},l={class:"mb-20"},r={class:"mb-20"},n={class:"yaml"},i={class:"resource-yaml"};function d(e,t,a,d,u,c){const p=(0,o.resolveComponent)("DataTemplate"),m=(0,o.resolveComponent)("LabeledInput"),v=(0,o.resolveComponent)("YamlEditor"),h=(0,o.resolveComponent)("ModalWithCard");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[c.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("h2",s,(0,o.toDisplayString)(e.t("harvester.virtualMachine.cloudConfig.title")),1)),(0,o.createElementVNode)("div",l,[(0,o.createVNode)(p,{ref:"userTemplate",value:a.userScript,type:"user","view-code":a.viewCode,mode:a.mode,"config-id":u.configUserId,options:u.optionUser,onShow:c.show,onUpdate:c.update,onUpdateTemplateId:c.updateTemplateId},null,8,["value","view-code","mode","config-id","options","onShow","onUpdate","onUpdateTemplateId"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(p,{ref:"networkTemplate",value:a.networkScript,type:"network","view-code":a.viewCode,mode:a.mode,"config-id":u.configNetworkId,options:u.optionNetwork,onShow:c.show,onUpdate:c.update},null,8,["value","view-code","mode","config-id","options","onShow","onUpdate"])]),u.isOpen?((0,o.openBlock)(),(0,o.createBlock)(h,{key:1,name:"createCloudTemplate",width:"40%",errors:u.errors,onFinish:c.save,onClose:c.cancel},{title:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("harvester.virtualMachine.cloudConfig.createTemplateTitle",{name:c.createTypeLable})),1)])),content:(0,o.withCtx)((()=>[(0,o.createVNode)(m,{value:u.cloudTemplateName,"onUpdate:value":t[0]||(t[0]=e=>u.cloudTemplateName=e),label:e.t("harvester.virtualMachine.input.name"),class:"mb-20",required:"",onKeydown:t[1]||(t[1]=(0,o.withKeys)((0,o.withModifiers)((()=>{}),["prevent"]),["native","enter"]))},null,8,["value","label"]),(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(v,{ref:"createTemplate",value:u.cloudTemplate,"onUpdate:value":t[2]||(t[2]=e=>u.cloudTemplate=e),class:"yaml-editor","editor-mode":c.editorMode},null,8,["value","editor-mode"])])])])),_:1},8,["errors","onFinish","onClose"])):(0,o.createCommentVNode)("",!0)])}var u=a(65359),c=a(83652),p=a(86621),m=a(85),v=a(45360),h=a(2602),f=a(53548),y=a(16369);const b="_NEW";var g={emits:["updateUserData","updateNetworkData","updateDataTemplateId"],components:{DataTemplate:y["default"],YamlEditor:p.A,LabeledInput:c.o,ModalWithCard:m.A},props:{mode:{type:String,default:"create"},namespace:{type:String,default:""},userScript:{type:String,default:""},networkScript:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data(){return{errors:[],templateType:"",cloudTemplate:"",cloudTemplateName:"",configUserId:"",configNetworkId:"",optionUser:[],optionNetwork:[],isOpen:!1}},async fetch(){const e=await this.$store.dispatch("harvester/findAll",{type:v.K5}),t=[],a=[];for(const o of e)"user"===o.metadata?.labels?.[h.r.CLOUD_INIT]&&t.push({label:o?.id,value:o?.id}),"network"===o.metadata?.labels?.[h.r.CLOUD_INIT]&&a.push({label:o?.id,value:o?.id});t.unshift({label:this.t("harvester.virtualMachine.cloudConfig.createNew"),value:b}),a.unshift({label:this.t("harvester.virtualMachine.cloudConfig.createNew"),value:b}),this.optionUser=t,this.optionNetwork=a},computed:{...(0,u.L8)({t:"i18n/t"}),createTypeLable(){const e=`harvester.virtualMachine.cloudConfig.${this.templateType}.label`;return this.t(e)},editorMode(){return this.isView?p.j.VIEW_CODE:p.j.EDIT_CODE},isView(){return this.mode===f.nW}},methods:{updateValue(){this.$refs["userTemplate"].updateValue(),this.$refs["networkTemplate"].updateValue()},update(e,t){"user"===t&&this.$emit("updateUserData",e),"network"===t&&this.$emit("updateNetworkData",e)},updateTemplateId(e,t){this.$emit("updateDataTemplateId",e,t)},show(e){this.templateType=e,this.isOpen=!0},async save(e){if(this.errors=[],!this.cloudTemplateName)return this.errors.push(this.t("validation.required",{key:this.t("harvester.virtualMachine.input.name")},!0)),void e(!1);if(!this.cloudTemplate){const t="user"===this.templateType?"harvester.cloudTemplate.userData":"harvester.cloudTemplate.networkData";return this.errors.push(this.t("validation.required",{key:this.t(t)},!0)),void e(!1)}const t=await this.$store.dispatch("harvester/create",{type:v.K5,metadata:{labels:{[h.r.CLOUD_INIT]:this.templateType},name:this.cloudTemplateName,namespace:this.namespace},data:{cloudInit:this.cloudTemplate}});try{const a=await t.save();a.id&&("user"===this.templateType?this.configUserId=a.id:this.configNetworkId=a.id,this.$fetch()),e(!0),this.cancel()}catch(a){this.errors=[a.message],e(!1)}},cancel(){this.cloudTemplate="",this.cloudTemplateName="",this["errors"]=[],this.isOpen=!1},refresh(){this.$refs["userTemplate"].refresh(),this.$refs["networkTemplate"].refresh()}}},k=(a(9729),a(47433));const w=(0,k.A)(g,[["render",d],["__scopeId","data-v-2d3a6d84"]]);var N=w},75403:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var o=a(9274);const s={class:"row"},l={class:"col span-6 mb-10"},r={class:"col span-6 mb-10"};function n(e,t,a,n,i,d){const u=(0,o.resolveComponent)("UnitInput"),c=(0,o.resolveComponent)("InputOrDisplay");return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(c,{name:"CPU",value:d.cupDisplay,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{value:i.localCpu,"onUpdate:value":[t[0]||(t[0]=e=>i.localCpu=e),d.change],label:"CPU",suffix:"C",delay:0,required:"",disabled:a.disabled,mode:a.mode,class:"mb-20"},null,8,["value","disabled","mode","onUpdate:value"])])),_:1},8,["value","mode"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(c,{name:e.t("harvester.virtualMachine.input.memory"),value:d.memoryDisplay,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{value:i.localMemory,"onUpdate:value":[t[1]||(t[1]=e=>i.localMemory=e),d.change],label:e.t("harvester.virtualMachine.input.memory"),mode:a.mode,"input-exponent":3,delay:0,increment:1024,"output-modifier":!0,disabled:a.disabled,required:"",class:"mb-20"},null,8,["value","label","mode","disabled","onUpdate:value"])])),_:1},8,["name","value","mode"])])])}var i=a(37814),d=a(76715),u={name:"HarvesterEditCpuMemory",emits:["updateCpuMemory"],components:{UnitInput:i.A,InputOrDisplay:d.A},props:{cpu:{type:Number,default:null},memory:{type:String,default:null},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data(){return{localCpu:this.cpu,localMemory:this.memory}},computed:{cupDisplay(){return`${this.localCpu} C`},memoryDisplay(){return`${this.localMemory}`}},watch:{cpu(e){this.localCpu=e},memory(e){e&&!e.includes("null")&&(this.localMemory=e)}},methods:{change(){let e="";e=String(this.localMemory).includes("Gi")?this.localMemory:`${this.localMemory}Gi`,e.includes("null")&&(e=null),this.$emit("updateCpuMemory",this.localCpu,e)}}},c=a(47433);const p=(0,c.A)(u,[["render",n]]);var m=p},48893:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return V}});var o=a(9274);const s={class:"row mb-20"},l={"data-testid":"input-hen-name",class:"col span-6"},r={"data-testid":"input-hen-model",class:"col span-6"},n={"data-testid":"input-hen-networkName",class:"col span-6"},i={"data-testid":"input-hen-type",class:"col span-6"},d={key:0},u={class:"row mb-20"},c={class:"row"},p={key:0,"data-testid":"input-hen-macAddress",class:"col span-6"};function m(e,t,a,m,v,h){const f=(0,o.resolveComponent)("LabeledInput"),y=(0,o.resolveComponent)("InputOrDisplay"),b=(0,o.resolveComponent)("LabeledSelect");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(y,{name:e.t("harvester.fields.name"),value:a.value.name,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{value:a.value.name,"onUpdate:value":[t[0]||(t[0]=e=>a.value.name=e),h.update],label:e.t("harvester.fields.name"),required:"",mode:a.mode,disabled:h.isDisabled},null,8,["value","label","mode","disabled","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(y,{name:e.t("harvester.fields.model"),value:a.value.model,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{value:a.value.model,"onUpdate:value":[t[1]||(t[1]=e=>a.value.model=e),h.update],label:e.t("harvester.fields.model"),disabled:h.isDisabled,options:h.modelOption,mode:a.mode,required:""},null,8,["value","label","disabled","options","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(["row",{"mb-20":!v.isMasquerade}])},[(0,o.createElementVNode)("div",n,[(0,o.createVNode)(y,{name:e.t("harvester.fields.network"),value:a.value.networkName,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{value:a.value.networkName,"onUpdate:value":[t[2]||(t[2]=e=>a.value.networkName=e),h.updateNetworkName],label:e.t("harvester.fields.network"),options:h.allNetworkOption,mode:a.mode,required:"",disabled:h.isDisabled},null,8,["value","label","options","mode","disabled","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",i,[(0,o.createVNode)(y,{name:e.t("harvester.fields.type"),value:a.value.type,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{value:a.value.type,"onUpdate:value":[t[3]||(t[3]=e=>a.value.type=e),h.update],label:e.t("harvester.fields.type"),options:h.typeOption,mode:a.mode,required:""},null,8,["value","label","options","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])],2),!v.isMasquerade&&a.isSingle?((0,o.openBlock)(),(0,o.createElementBlock)("div",d,[(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("a",{role:"button",onClick:t[4]||(t[4]=(...e)=>h.toggleAdvanced&&h.toggleAdvanced(...e))},(0,o.toDisplayString)(v.showAdvanced?e.t("harvester.generic.hideMore"):e.t("harvester.generic.showMore")),1)]),(0,o.createElementVNode)("div",c,[v.showAdvanced?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.createVNode)(y,{name:e.t("harvester.fields.macAddress"),value:a.value.macAddress,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(f,{value:a.value.macAddress,"onUpdate:value":[t[5]||(t[5]=e=>a.value.macAddress=e),h.update],"label-key":"harvester.fields.macAddress",mode:a.mode,tooltip:e.t("harvester.virtualMachine.volume.macTip")},null,8,["value","mode","tooltip","onUpdate:value"])])),_:1},8,["name","value","mode"])])):(0,o.createCommentVNode)("",!0)])])):(0,o.createCommentVNode)("",!0)])}var v=a(76715),h=a(83652),f=a(91847),y=a(38228),b=a(53548),g=a(48249);const k=[{label:"virtio",value:"virtio"},{label:"e1000",value:"e1000"},{label:"e1000e",value:"e1000e"},{label:"ne2k_pci",value:"ne2k_pci"},{label:"pcnet",value:"pcnet"},{label:"rtl8139",value:"rtl8139"}];var w={name:"HarvesterEditNetwork",emits:["update"],components:{LabeledInput:h.o,LabeledSelect:f.A,InputOrDisplay:v.A},props:{value:{type:Object,default:()=>({})},networkOption:{type:Array,default:()=>[]},rows:{type:Array,default:()=>[]},mode:{type:String,default:"create"},isSingle:{type:Boolean,default:!0}},data(){const e=this.value.isPod;return e&&(this.value.networkName=g.PO),{isMasquerade:e,hasManagementNetwork:!1,showAdvanced:!1}},computed:{isDisabled(){return this.isMasquerade&&!this.value.newCreateId&&!this.isCreate},isView(){return this.mode===b.nW},isCreate(){return this.mode===b.YQ},modelOption(){return k},allNetworkOption(){const e=(0,y.o8)(this.networkOption),t=[{label:g.PO,value:g.PO}];return this.value.newCreateId&&this.hasManagementNetwork?e:this.value.newCreateId&&!this.hasManagementNetwork?[...t,...e]:this.isMasquerade?t:e},typeOption(){const e=[{label:"masquerade",value:"masquerade"},{label:"bridge",value:"bridge"}],t=[{label:"bridge",value:"bridge"}];return this.isMasquerade?e:t}},watch:{rows:{handler(e){const t=!!e.some((e=>e.isPod));this["hasManagementNetwork"]=t},immediate:!0,deep:!0},isSingle(e){e||(this.value["macAddress"]="",this.update())}},methods:{updateNetworkName(e){e===g.PO?(this.value.isPod=!0,this.value.macAddress=""):this.value.isPod=!1,this["isMasquerade"]=this.value.isPod,this.value.isPod?this.value.type="masquerade":this.value.type="bridge",this.update()},update(){this.$emit("update")},toggleAdvanced(){this.showAdvanced=!this.showAdvanced}}},N=a(47433);const E=(0,N.A)(w,[["render",m]]);var V=E},8746:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var o=a(9274);const s=e=>((0,o.pushScopeId)("data-v-697c87ca"),e=e(),(0,o.popScopeId)(),e),l=["onClick"],r=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-x"},null,-1))),n=[r];function i(e,t,a,s,r,i){const d=(0,o.resolveComponent)("Base"),u=(0,o.resolveComponent)("InfoBox");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.rows,((t,s)=>((0,o.openBlock)(),(0,o.createBlock)(u,{key:s},{default:(0,o.withCtx)((()=>[i.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"role-link remove-vol",onClick:e=>i.remove(t)},n,8,l)),(0,o.createElementVNode)("h3",null,(0,o.toDisplayString)(e.t("harvester.virtualMachine.network.title")),1),(0,o.createVNode)(d,{value:r.rows[s],"onUpdate:value":e=>r.rows[s]=e,rows:r.rows,mode:a.mode,"is-single":a.isSingle,"network-option":i.networkOption,onUpdate:i.update},null,8,["value","onUpdate:value","rows","mode","is-single","network-option","onUpdate"])])),_:2},1024)))),128)),i.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm bg-primary",onClick:t[0]||(t[0]=(...e)=>i.add&&i.add(...e))},(0,o.toDisplayString)(e.t("harvester.virtualMachine.network.addNetwork")),1))])}var d=a(88289),u=a(45360),c=a(31966),p=a(38228),m=a(13451),v=a(931),h=a(53548),f=a(2602),y=a(48893),b={components:{InfoBox:d.A,Base:y["default"]},props:{mode:{type:String,default:"create"},value:{type:Array,default:()=>[]},isSingle:{type:Boolean,default:!0}},data(){return{rows:this.addKeyId((0,p.o8)(this.value)),nameIdx:1}},computed:{isView(){return this.mode===h.nW},networkOption(){const e=this.$store.getters["harvester/all"](u.XG).filter((e=>!e.metadata?.annotations?.[f.r.STORAGE_NETWORK])),t=(0,c.Ul)(e.map((e=>{const t=e.isNotReady?`${e.id} (${this.t("generic.notReady")})`:e.id;return{label:t,value:e.id,disabled:e.isNotReady}})),"label");return t}},watch:{value(e){this.rows=e}},methods:{add(e){const t=this.generateName(),a={name:t,networkName:"",model:"virtio",type:"bridge",newCreateId:(0,m.vx)(10),rowKeyId:(0,m.vx)(10)};this.rows.push(a),this.update()},remove(e){(0,v.Gj)(this.rows,e),this.update()},addKeyId(e){return e.map((e=>({...e,rowKeyId:(0,m.vx)(10)})))},generateName(){let e="",t=!0;while(t)e=`nic-${this.nameIdx}`,t=this.rows.find((t=>t.name===e)),this.nameIdx++;return e},update(){this.$emit("update:value",this.rows)}}},g=(a(89982),a(47433));const k=(0,g.A)(b,[["render",i],["__scopeId","data-v-697c87ca"]]);var w=k},78025:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var o=a(9274);function s(e,t,a,s,l,r){const n=(0,o.resolveComponent)("LabeledSelect"),i=(0,o.resolveComponent)("LabeledInput"),d=(0,o.resolveComponent)("ModalWithCard");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(n,{value:l.checkedSsh,"onUpdate:value":[t[0]||(t[0]=e=>l.checkedSsh=e),r.update],label:e.t("harvester.virtualMachine.input.sshKey"),taggable:!0,mode:a.mode,multiple:!0,searchable:a.searchable,disabled:a.disabled,options:r.sshOption},null,8,["value","label","mode","searchable","disabled","options","onUpdate:value"]),l.isOpen?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,name:l.randomStr,width:"40%",errors:l.errors,onFinish:r.save,onClose:r.cancel},{title:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("harvester.virtualMachine.sshTitle")),1)])),content:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{value:l.sshName,"onUpdate:value":t[1]||(t[1]=e=>l.sshName=e),label:e.t("harvester.virtualMachine.input.name"),class:"mb-20",required:"",onKeydown:t[2]||(t[2]=(0,o.withKeys)((0,o.withModifiers)((()=>{}),["prevent"]),["native","enter"]))},null,8,["value","label"]),(0,o.createVNode)(i,{value:l.publicKey,"onUpdate:value":t[3]||(t[3]=e=>l.publicKey=e),label:e.t("harvester.virtualMachine.input.sshKeyValue"),"min-height":160,class:"mb-20",type:"multiline",required:""},null,8,["value","label"])])),_:1},8,["name","errors","onFinish","onClose"])):(0,o.createCommentVNode)("",!0)])}var l=a(65359),r=a(13451),n=a(83652),i=a(91847),d=a(85),u=a(38228),c=a(53548),p=a(45360),m=a(32766);const v="_NEW";var h={emits:["update:sshKey"],components:{LabeledInput:n.o,ModalWithCard:d.A,LabeledSelect:i.A},props:{value:{type:Array,default:()=>[]},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},namespace:{type:String,default:""},createNamespace:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data(){return{checkedSsh:this.value,publicKey:"",sshName:"",randomStr:(0,r.vx)(5).toLowerCase(),errors:[],isAll:!1,checkAll:!1,isOpen:!1}},computed:{...(0,l.L8)({t:"i18n/t"}),schema(){return this.$store.getters["harvester/schemaFor"](m.rk.SSH)},isCreatable(){return!(this.schema&&!this.schema?.collectionMethods.find((e=>["blocked-post","post"].includes(e.toLowerCase()))))},sshOption(){const e=this.$store.getters["harvester/all"](m.rk.SSH).map((e=>({label:e.id,value:e.id})));return!this.disableCreate&&this.mode!==c.nW&&this.isCreatable&&e.unshift({label:this.t("harvester.virtualMachine.createSSHKey"),value:v}),e}},watch:{publicKey(e){const t=e.trim(),a=t.split(/\s+/);if(3===a.length&&!this.sshName){const e=a[2];this.randomStr=(0,r.vx)(10).toLowerCase(),this.sshName=e.includes("@")?e.split("@")[0]:e}},value(e){this.checkedSsh=e},checkedSsh(e,t){e.includes(v)&&(this["checkedSsh"]=t,this.update(),this.show())}},methods:{show(){this.isOpen=!0},hide(){this.isOpen=!1},async createNamespaceIfNeeded(){if(!this.createNamespace||this.disableCreate)return;const e=await this.$store.dispatch("harvester/findAll",{type:p.CU}),t=e?.find((e=>e.name===this.namespace));if(!t){const e=await this.$store.dispatch("harvester/createNamespace",{name:this.namespace},{root:!0});e.applyDefaults(),await e.save()}},async createSSHKey(){const e=await this.$store.dispatch("harvester/create",{metadata:{name:this.sshName,namespace:this.namespace},spec:{publicKey:this.publicKey},type:m.rk.SSH}),t=await e.save();t.id&&this.checkedSsh.push(`${this.namespace}/${this.sshName}`)},async save(e){if(this.errors=[],!this.sshName){const e=this.t("harvester.virtualMachine.input.name"),t=this.t("validation.required",{key:e});this.errors.push(t)}if(!this.publicKey){const e=this.t("harvester.virtualMachine.input.sshKeyValue"),t=this.t("validation.required",{key:e});this.errors.push(t)}if(this.sshName.length>63){const e=this.t("harvester.validation.custom.tooLongName",{max:63});this.errors.push(e)}if(this.errors.length>0)e(!1);else try{await this.createNamespaceIfNeeded(),await this.createSSHKey(),e(!0),this.cancel()}catch(t){this.errors=[t.message],e(!1)}},cancel(){this.hide(),this.resetFields()},resetFields(){this.sshName="",this.publicKey="",this.errors=[]},update(){this.$emit("update:sshKey",(0,u.o8)(this.checkedSsh))}}},f=a(47433);const y=(0,f.A)(h,[["render",s]]);var b=y},22644:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return G}});var o=a(9274);const s=e=>((0,o.pushScopeId)("data-v-2fc8bb3a"),e=e(),(0,o.popScopeId)(),e),l=["onClick"],r=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-x"},null,-1))),n=[r],i=["onClick"],d={key:0,class:"title"},u=["href"],c=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-external-link"},null,-1))),p=[c],m={key:1},v={class:"bootOrder"},h={key:0,class:"mr-15"},f=["disabled","onClick"],y=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-lg icon-chevron-up"},null,-1))),b=[y],g=["disabled","onClick"],k=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-lg icon-chevron-down"},null,-1))),w=[k],N={class:"text-muted"},E={class:"mt-15"},V={key:2},C=["disabled"],S={class:"buttons"};function x(e,t,a,s,r,c){const y=(0,o.resolveComponent)("Banner"),k=(0,o.resolveComponent)("router-link"),x=(0,o.resolveComponent)("BadgeStateFormatter"),B=(0,o.resolveComponent)("InfoBox"),U=(0,o.resolveComponent)("Sortable"),A=(0,o.resolveComponent)("ModalWithCard"),T=(0,o.resolveDirective)("clean-tooltip");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[c.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)(y,{key:0,color:"info","label-key":"harvester.virtualMachine.volume.dragTip"})),(0,o.createVNode)(U,{list:r.rows,options:{disabled:c.isView},"item-key":"id",onEnd:c.update},{item:(0,o.withCtx)((({element:t,index:s})=>[((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:t.name},[(0,o.createVNode)(B,{class:"box"},{default:(0,o.withCtx)((()=>[c.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"role-link btn btn-sm remove",onClick:e=>c.removeVolume(t)},n,8,l)),t.hotpluggable&&c.isView?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:1,type:"button",class:"role-link btn remove",onClick:e=>c.unplugVolume(t)},(0,o.toDisplayString)(e.t("harvester.virtualMachine.unplug.detachVolume")),9,i)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("h3",null,[t.to&&c.isVirtualType?((0,o.openBlock)(),(0,o.createElementBlock)("span",d,[(0,o.createVNode)(k,{to:t.to},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("harvester.virtualMachine.volume.edit"))+" "+(0,o.toDisplayString)(c.headerFor(t.source)),1)])),_:2},1032,["to"]),t.pvc?((0,o.openBlock)(),(0,o.createBlock)(x,{key:0,class:"ml-10 state",arbitrary:!0,row:t.pvc,value:t.pvc.state},null,8,["row","value"])):(0,o.createCommentVNode)("",!0),c.dev&&t.pvc&&t.pvc.resourceExternalLink?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("a",{key:1,class:"ml-5 resource-external",rel:"nofollow noopener noreferrer",target:"_blank",href:t.pvc.resourceExternalLink.url},p,8,u)),[[T,e.t(t.pvc.resourceExternalLink.tipsKey||"generic.resourceExternalLinkTips")]]):(0,o.createCommentVNode)("",!0)])):((0,o.openBlock)(),(0,o.createElementBlock)("span",m,(0,o.toDisplayString)(c.headerFor(t.source,!!t?.volumeBackups)),1))]),(0,o.createElementVNode)("div",null,[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(c.componentFor(t.source)),{value:r.rows[s],rows:r.rows,namespace:a.namespace,"is-create":c.isCreate,"is-edit":c.isEdit,"is-view":c.isView,"is-virtual-type":c.isVirtualType,mode:a.mode,idx:s,"validate-required":a.validateRequired,onUpdate:c.update},null,40,["value","rows","namespace","is-create","is-edit","is-view","is-virtual-type","mode","idx","validate-required","onUpdate"]))]),(0,o.createElementVNode)("div",v,[c.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",h,[(0,o.createElementVNode)("button",{disabled:0===s,class:"btn btn-sm role-primary",onClick:(0,o.withModifiers)((e=>c.changeSort(s,!1)),["prevent"])},b,8,f),(0,o.createElementVNode)("button",{disabled:s===r.rows.length-1,class:"btn btn-sm role-primary",onClick:(0,o.withModifiers)((e=>c.changeSort(s,!0)),["prevent"])},w,8,g)])),(0,o.createElementVNode)("div",N," bootOrder: "+(0,o.toDisplayString)(s+1),1)]),(0,o.createElementVNode)("div",E,[t.volumeStatus&&!c.isCreate?((0,o.openBlock)(),(0,o.createBlock)(y,{key:0,class:"volume-status",color:"warning",label:r.ucFirst(t.volumeStatus)},null,8,["label"])):(0,o.createCommentVNode)("",!0),a.value.volumeBackups&&a.value.volumeBackups.error&&a.value.volumeBackups.error.message?((0,o.openBlock)(),(0,o.createBlock)(y,{key:1,color:"error",label:r.ucFirst(a.value.volumeBackups.error.message)},null,8,["label"])):(0,o.createCommentVNode)("",!0),c.isLonghornV2(t)&&!c.isView?((0,o.openBlock)(),(0,o.createBlock)(y,{key:2,color:"warning",label:e.t("harvester.volume.longhorn.disableResize")},null,8,["label"])):(0,o.createCommentVNode)("",!0)])])),_:2},1024)]))])),_:1},8,["list","options","onEnd"]),c.showVolumeTip?((0,o.openBlock)(),(0,o.createBlock)(y,{key:1,color:"warning",label:e.t("harvester.virtualMachine.volume.volumeTip")},null,8,["label"])):(0,o.createCommentVNode)("",!0),c.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("div",V,[(0,o.createElementVNode)("button",{type:"button",class:"btn btn-sm bg-primary mr-15 mb-10",disabled:0===r.rows.length,onClick:t[0]||(t[0]=e=>c.addVolume(r.SOURCE_TYPE.NEW))},(0,o.toDisplayString)(e.t("harvester.virtualMachine.volume.addVolume")),9,C),a.existingVolumeDisabled?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn btn-sm bg-primary mr-15 mb-10",onClick:t[1]||(t[1]=e=>c.addVolume(r.SOURCE_TYPE.ATTACH_VOLUME))},(0,o.toDisplayString)(e.t("harvester.virtualMachine.volume.addExistingVolume")),1)),(0,o.createElementVNode)("button",{type:"button",class:"btn btn-sm bg-primary mr-15 mb-10",onClick:t[2]||(t[2]=e=>c.addVolume(r.SOURCE_TYPE.IMAGE))},(0,o.toDisplayString)(e.t("harvester.virtualMachine.volume.addVmImage")),1),(0,o.createElementVNode)("button",{type:"button",class:"btn btn-sm bg-primary mb-10",onClick:t[3]||(t[3]=e=>c.addVolume(r.SOURCE_TYPE.CONTAINER))},(0,o.toDisplayString)(e.t("harvester.virtualMachine.volume.addContainer")),1)])),r.isOpen?((0,o.openBlock)(),(0,o.createBlock)(A,{key:3,name:"deleteTip",width:400},{title:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.t("harvester.virtualMachine.volume.unmount.title")),1)])),content:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.t("harvester.virtualMachine.volume.unmount.message")),1)])),footer:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",S,[(0,o.createElementVNode)("button",{class:"btn role-secondary mr-20",onClick:t[4]||(t[4]=(0,o.withModifiers)(((...e)=>c.cancel&&c.cancel(...e)),["prevent"]))},(0,o.toDisplayString)(e.t("generic.no")),1),(0,o.createElementVNode)("button",{class:"btn bg-primary mr-20",onClick:t[5]||(t[5]=(0,o.withModifiers)(((...e)=>c.deleteVolume&&c.deleteVolume(...e)),["prevent"]))},(0,o.toDisplayString)(e.t("generic.yes")),1)])])),_:1})):(0,o.createCommentVNode)("",!0)])}var B=a(48052),U=a(88289),A=a(40780),T=a(7493),I=a(37814),M=a(83652),O=a(91847),_=a(85),$=a(45360),L=a(38228),D=a(13451),q=a(931),R=a(53548),P=a(36326),K=a(66905),j=a(20652),H=a(32766),z={emits:["update:value"],components:{Banner:A.l,BadgeStateFormatter:T.A,Sortable:B.L,InfoBox:U.A,LabeledInput:M.o,UnitInput:I.A,LabeledSelect:O.A,ModalWithCard:_.A},props:{vm:{type:Object,default:()=>({})},mode:{type:String,default:R.YQ},value:{type:Array,default:()=>[]},namespace:{type:String,default:null},existingVolumeDisabled:{type:Boolean,default:!1},validateRequired:{type:Boolean,default:!1},customVolumeMode:{type:String,default:"Block"},customAccessMode:{type:String,default:"ReadWriteMany"},resourceType:{type:String,default:""}},async fetch(){await this.$store.dispatch("harvester/findAll",{type:$.YH})},data(){return{ucFirst:D.TF,SOURCE_TYPE:K.xO,rows:(0,L.o8)(this.value),nameIdx:1,vol:null,isOpen:!1}},computed:{dev(){try{return this.$store.getters["prefs/get"](P.bc)}catch{return this.$store.getters["prefs/get"](P.IJ)}},isVirtualType(){return this.resourceType===H.rk.VM},isView(){return this.mode===R.nW},isEdit(){return this.mode===R.G5},isCreate(){return this.mode===R.YQ},showVolumeTip(){const e=this.getImageDisplayName(this.rows[0]?.image);return!(1!==this.rows.length||"cd-rom"!==this.rows[0].type||!/.iso$/i.test(e))},pvcs(){return this.$store.getters["harvester/all"]($.YH)||[]}},watch:{value:{handler(e){const t=(0,L.o8)(e).map((e=>(this.isCreate||e.source===K.xO.CONTAINER||e.newCreateId||(e.to={name:`${j.KR}-c-cluster-resource-namespace-id`,params:{resource:H.rk.VOLUME,namespace:this.namespace,id:e.realName},query:{mode:R.G5}},e.pvc=this.pvcs.find((t=>t.metadata.name===e.realName))),e)));this["rows"]=t},deep:!0,immediate:!0}},methods:{addVolume(e){const t=this.generateName(),a={id:(0,D.vx)(5),name:t,source:e,size:"10Gi",type:"disk",accessMode:this.customAccessMode,volumeMode:this.customVolumeMode,volumeName:"",bus:"virtio",newCreateId:(0,D.vx)(10)};e===K.xO.NEW&&(a.storageClassName=this.defaultStorageClass?.metadata?.name||"longhorn"),this.rows.push(a),this.update()},generateName(){let e="",t=!0;while(t)e=`disk-${this.nameIdx}`,t=this.rows.find((t=>t.name===e)),this.nameIdx++;return e},removeVolume(e){this.vol=e,!e.newCreateId&&this.isEdit&&this.isVirtualType?this.isOpen=!0:((0,q.Gj)(this.rows,e),this.update())},unplugVolume(e){this.vm.unplugVolume(e.name)},componentFor(e){switch(e){case K.xO.NEW:return a(90819)["default"];case K.xO.IMAGE:return a(30260)["default"];case K.xO.ATTACH_VOLUME:return a(40090)["default"];case K.xO.CONTAINER:return a(88656)["default"]}},headerFor(e,t=!1){const a={[K.xO.NEW]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.volume"),[K.xO.IMAGE]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.vmImage"),[K.xO.ATTACH_VOLUME]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.existingVolume"),[K.xO.CONTAINER]:this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.container")}[e];return t?`${a} and Backups`:a},update(){this.$emit("update:value",this.rows)},deleteVolume(){(0,q.Gj)(this.rows,this.vol),this.update(),this.cancel()},cancel(){this.isOpen=!1},changeSort(e,t){this.rows.splice(t?e:e-1,1,...this.rows.splice(t?e+1:e,1,this.rows[t?e:e-1])),this.update()},getImageDisplayName(e){return this.$store.getters["harvester/all"](H.rk.IMAGE).find((t=>t.id===e))?.spec?.displayName},isLonghornV2(e){return e?.pvc?.storageClass?.isLonghornV2}}},F=(a(49091),a(47433));const W=(0,F.A)(z,[["render",x],["__scopeId","data-v-2fc8bb3a"]]);var G=W},88656:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var o=a(9274);const s={class:"row mb-20"},l={"data-testid":"input-hec-name",class:"col span-6"},r={"data-testid":"input-hec-type",class:"col span-6"},n={class:"row mb-20"},i={"data-testid":"input-hec-container",class:"col span-6"},d={"data-testid":"input-hec-bus",class:"col span-6"},u={class:"row mb-20"},c={key:0,class:"col span-6"};function p(e,t,a,p,m,v){const h=(0,o.resolveComponent)("LabeledInput"),f=(0,o.resolveComponent)("InputOrDisplay"),y=(0,o.resolveComponent)("LabeledSelect"),b=(0,o.resolveComponent)("LabelValue"),g=(0,o.resolveComponent)("Banner");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(f,{name:e.t("harvester.fields.name"),value:a.value.name,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{value:a.value.name,"onUpdate:value":[t[0]||(t[0]=e=>a.value.name=e),v.update],label:e.t("harvester.fields.name"),required:"",mode:a.mode},null,8,["value","label","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(f,{name:e.t("harvester.fields.type"),value:a.value.type,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(y,{value:a.value.type,"onUpdate:value":[t[1]||(t[1]=e=>a.value.type=e),v.update],label:e.t("harvester.fields.type"),options:m.VOLUME_TYPE,mode:a.mode,required:""},null,8,["value","label","options","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(f,{name:e.t("harvester.virtualMachine.volume.dockerImage"),value:a.value.container,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{value:a.value.container,"onUpdate:value":[t[2]||(t[2]=e=>a.value.container=e),v.update],label:e.t("harvester.virtualMachine.volume.dockerImage"),mode:a.mode,required:""},null,8,["value","label","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",d,[(0,o.createVNode)(f,{name:e.t("harvester.virtualMachine.volume.bus"),value:a.value.bus,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(y,{value:a.value.bus,"onUpdate:value":[t[3]||(t[3]=e=>a.value.bus=e),v.update],label:e.t("harvester.virtualMachine.volume.bus"),options:m.InterfaceOption,mode:a.mode},null,8,["value","label","options","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",u,[a.value.volumeBackups?((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createVNode)(f,{name:e.t("harvester.virtualMachine.volume.readyToUse"),value:a.value.volumeBackups.readyToUse,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{name:e.t("harvester.virtualMachine.volume.readyToUse"),value:a.value.volumeBackups.readyToUse},null,8,["name","value"])])),_:1},8,["name","value","mode"])])):(0,o.createCommentVNode)("",!0)]),a.value.volumeBackups&&a.value.volumeBackups.error&&a.value.volumeBackups.error.message?((0,o.openBlock)(),(0,o.createBlock)(g,{key:0,color:"error",class:"mb-20",label:a.value.volumeBackups.error.message},null,8,["label"])):(0,o.createCommentVNode)("",!0)])}var m=a(83652),v=a(91847),h=a(76715),f=a(66905),y=a(40780),b={name:"HarvesterEditContainer",emits:["update"],components:{LabeledInput:m.o,LabeledSelect:v.A,InputOrDisplay:h.A,Banner:y.l},props:{mode:{type:String,default:"create"},value:{type:Object,required:!0}},data(){return{VOLUME_TYPE:f._w,InterfaceOption:f.$z}},watch:{"value.type"(e){"cd-rom"===e&&(this.value["bus"]="sata",this.update())}},methods:{update(){this.$emit("update")}}},g=a(47433);const k=(0,g.A)(b,[["render",p]]);var w=k},40090:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var o=a(9274);const s={class:"row mb-20"},l={"data-testid":"input-hee-name",class:"col span-6"},r={"data-testid":"input-hee-type",class:"col span-6"},n={class:"row mb-20"},i={"data-testid":"input-hee-volumeName",class:"col span-6"},d={"data-testid":"input-hee-size",class:"col span-6"},u={class:"row mb-20"},c={key:0,"data-testid":"input-hee-image",class:"col span-6"},p={"data-testid":"input-hee-bus",class:"col span-6"},m={key:1,class:"col span-6"};function v(e,t,a,v,h,f){const y=(0,o.resolveComponent)("LabeledInput"),b=(0,o.resolveComponent)("InputOrDisplay"),g=(0,o.resolveComponent)("LabeledSelect"),k=(0,o.resolveComponent)("UnitInput"),w=(0,o.resolveComponent)("LabelValue"),N=(0,o.resolveComponent)("Banner");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(b,{name:e.t("harvester.fields.name"),value:a.value.name,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(y,{value:a.value.name,"onUpdate:value":[t[0]||(t[0]=e=>a.value.name=e),f.update],label:e.t("harvester.fields.name"),mode:a.mode,required:""},null,8,["value","label","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(b,{name:e.t("harvester.fields.type"),value:a.value.type,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{value:a.value.type,"onUpdate:value":[t[1]||(t[1]=e=>a.value.type=e),f.update],label:e.t("harvester.fields.type"),mode:a.mode,options:h.VOLUME_TYPE,required:""},null,8,["value","label","mode","options","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(b,{name:e.t("harvester.fields.volume"),value:a.value.volumeName,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{value:a.value.volumeName,"onUpdate:value":[t[2]||(t[2]=e=>a.value.volumeName=e),f.update],disabled:f.isDisabled,label:e.t("harvester.fields.volume"),mode:a.mode,options:f.volumeOption,required:""},null,8,["value","disabled","label","mode","options","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",d,[(0,o.createVNode)(b,{name:e.t("harvester.fields.size"),value:a.value.size,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{value:a.value.size,"onUpdate:value":[t[3]||(t[3]=e=>a.value.size=e),f.update],"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:a.mode,disabled:!0},null,8,["value","label","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",u,[f.image?((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createVNode)(b,{name:e.t("harvester.fields.image"),value:f.image,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(y,{value:f.image,"onUpdate:value":[t[4]||(t[4]=e=>f.image=e),f.update],label:e.t("harvester.fields.image"),mode:a.mode,disabled:!0},null,8,["value","label","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",p,[(0,o.createVNode)(b,{name:e.t("harvester.virtualMachine.volume.bus"),value:a.value.bus,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{value:a.value.bus,"onUpdate:value":[t[5]||(t[5]=e=>a.value.bus=e),f.update],label:e.t("harvester.virtualMachine.volume.bus"),mode:a.mode,options:h.InterfaceOption,disabled:!0,required:""},null,8,["value","label","mode","options","onUpdate:value"])])),_:1},8,["name","value","mode"])]),a.value.volumeBackups?((0,o.openBlock)(),(0,o.createElementBlock)("div",m,[(0,o.createVNode)(b,{name:e.t("harvester.virtualMachine.volume.readyToUse"),value:a.value.volumeBackups.readyToUse,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{name:e.t("harvester.virtualMachine.volume.readyToUse"),value:a.value.volumeBackups.readyToUse},null,8,["name","value"])])),_:1},8,["name","value","mode"])])):(0,o.createCommentVNode)("",!0)]),a.value.volumeBackups&&a.value.volumeBackups.error&&a.value.volumeBackups.error.message?((0,o.openBlock)(),(0,o.createBlock)(N,{key:0,color:"error",class:"mb-20",label:a.value.volumeBackups.error.message},null,8,["label"])):(0,o.createCommentVNode)("",!0)])}var h=a(37814),f=a(83652),y=a(71308),b=a(91847),g=a(76715),k=a(40780),w=a(31966),N=a(45360),E=a(53548),V=a(2602),C=a(32766),S=a(66905),x={name:"HarvesterEditExisting",emits:["update"],components:{UnitInput:h.A,LabeledInput:f.o,LabeledSelect:b.A,InputOrDisplay:g.A,LabelValue:y.A,Banner:k.l},props:{mode:{type:String,default:E.YQ},value:{type:Object,required:!0},isEdit:{type:Boolean,default:!1},namespace:{type:String,default:null},idx:{type:Number,default:0},rows:{type:Array,required:!0}},data(){return this.value.realName&&(this.value.volumeName=this.value.realName),{VOLUME_TYPE:S._w,InterfaceOption:S.$z,loading:!1}},computed:{isDisabled(){return!this.value.newCreateId&&this.isEdit},allPVCs(){const e=this.$store.getters["harvester/all"](N.YH);return e.filter((e=>!this.namespace||this.namespace===e.metadata.namespace))||[]},image(){const e=this.$store.getters["harvester/all"](C.rk.IMAGE).find((e=>e.id===this.pvcResource?.metadata?.annotations?.[V.r.IMAGE_ID]));if(e)return`${e.metadata.namespace}/${e.spec.displayName}`},pvcResource(){return this.allPVCs.find((e=>e.metadata.name===this.value.volumeName))},volumeOption(){return(0,w.Ul)(this.allPVCs.filter((e=>{let t=!0,a=!1;return this.rows.forEach((a=>{a.volumeName===e.metadata.name&&(t=!1)})),!(0===this.idx&&!e.metadata?.annotations?.[V.r.IMAGE_ID])&&(e.attachVM&&t&&e.attachVM?.id===this.vm?.id&&this.isEdit?a=!1:e.attachVM&&(a=!0),t&&!a&&e.isAvailable)})).map((e=>({label:e.metadata.name,value:e.metadata.name}))),"label")}},watch:{"value.volumeName"(e){const t=this.allPVCs.find((t=>t.metadata.name===e));t&&(this.value.accessModes=t.spec.accessModes[0],this.value.size=t.spec.resources.requests.storage,this.value.storageClassName=t.spec.storageClassName,this.value.volumeMode=t.spec.volumeMode)},"value.type"(e){"cd-rom"===e&&(this.value["bus"]="sata",this.update())},pvcResource:{handler(e){!this.value.volumeName&&e?.metadata?.name&&(this.value.volumeName=e.metadata.name)},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")}}},B=a(47433);const U=(0,B.A)(x,[["render",v]]);var A=U},30260:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var o=a(9274);const s={class:"row mb-20"},l={"data-testid":"input-hevi-name",class:"col span-6"},r={"data-testid":"input-hevi-type",class:"col span-6"},n={class:"row mb-20"},i={"data-testid":"input-hevi-image",class:"col span-6"},d={"data-testid":"input-hevi-size",class:"col span-6"},u={class:"row mb-20"},c={"data-testid":"input-hevi-bus",class:"col span-6"},p={key:0,class:"col span-3"},m={class:"row mb-20"},v={key:0,class:"col span-3"};function h(e,t,a,h,f,y){const b=(0,o.resolveComponent)("LabeledInput"),g=(0,o.resolveComponent)("InputOrDisplay"),k=(0,o.resolveComponent)("LabeledSelect"),w=(0,o.resolveComponent)("UnitInput"),N=(0,o.resolveComponent)("LabelValue"),E=(0,o.resolveComponent)("Banner");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(g,{name:e.t("harvester.fields.name"),value:a.value.name,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(b,{value:a.value.name,"onUpdate:value":[t[0]||(t[0]=e=>a.value.name=e),y.update],label:e.t("harvester.fields.name"),required:"",mode:a.mode},null,8,["value","label","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(g,{name:e.t("harvester.fields.type"),value:a.value.type,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{value:a.value.type,"onUpdate:value":[t[1]||(t[1]=e=>a.value.type=e),y.update],label:e.t("harvester.fields.type"),options:f.VOLUME_TYPE,mode:a.mode},null,8,["value","label","options","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(g,{name:e.t("harvester.fields.image"),value:y.imageName,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{value:a.value.image,"onUpdate:value":[t[2]||(t[2]=e=>a.value.image=e),y.onImageChange],disabled:0===a.idx&&!a.isCreate&&!a.value.newCreateId&&a.isVirtualType,label:e.t("harvester.fields.image"),options:y.imagesOption,mode:a.mode,searchable:!0,required:a.validateRequired},null,8,["value","disabled","label","options","mode","required","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",d,[(0,o.createVNode)(g,{name:e.t("harvester.fields.size"),value:a.value.size,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{value:a.value.size,"onUpdate:value":[t[3]||(t[3]=e=>a.value.size=e),y.update],"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:a.mode,required:a.validateRequired,disable:y.isLonghornV2,suffix:"GiB"},null,8,["value","label","mode","required","disable","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("div",c,[(0,o.createVNode)(g,{name:e.t("harvester.virtualMachine.volume.bus"),value:a.value.bus,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(k,{value:a.value.bus,"onUpdate:value":[t[4]||(t[4]=e=>a.value.bus=e),y.update],label:e.t("harvester.virtualMachine.volume.bus"),mode:a.mode,options:f.InterfaceOption},null,8,["value","label","mode","options","onUpdate:value"])])),_:1},8,["name","value","mode"])]),y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.createVNode)(N,{name:e.t("harvester.virtualMachine.volume.encryption"),value:y.encryptionValue},null,8,["name","value"])])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",m,[a.value.volumeBackups&&y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",v,[(0,o.createVNode)(N,{name:e.t("harvester.virtualMachine.volume.readyToUse"),value:y.readyToUse},null,8,["name","value"])])):(0,o.createCommentVNode)("",!0)]),a.value.volumeBackups&&a.value.volumeBackups.error&&a.value.volumeBackups.error.message?((0,o.openBlock)(),(0,o.createBlock)(E,{key:0,color:"error",class:"mb-20",label:a.value.volumeBackups.error.message},null,8,["label"])):(0,o.createCommentVNode)("",!0)])}var f=a(931),y=a(37814),b=a(83652),g=a(91847),k=a(76715),w=a(40780),N=a(45360),E=a(14199),V=a(32766),C=a(66905),S=a(53548),x=a(71308),B=a(13451),U={name:"HarvesterEditVMImage",emits:["update"],components:{UnitInput:y.A,LabeledInput:b.o,LabeledSelect:g.A,InputOrDisplay:k.A,LabelValue:x.A,Banner:w.l},props:{value:{type:Object,default:()=>({})},namespace:{type:String,default:null},mode:{type:String,default:"create"},idx:{type:Number,required:!0},isCreate:{type:Boolean,default:!0},isEdit:{type:Boolean,default:!1},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data(){return{VOLUME_TYPE:C._w,InterfaceOption:C.$z,loading:!1,images:[]}},fetch(){this.images=this.$store.getters["harvester/all"](V.rk.IMAGE)},computed:{encryptionValue(){return(0,B.TF)(String(this.value.isEncrypted))},isView(){return this.mode===S.nW},imagesOption(){return this.images.filter((e=>e.isReady)).sort(((e,t)=>e.creationTimestamp>t.creationTimestamp?-1:1)).map((e=>({label:`${e.metadata.namespace}/${e.spec.displayName}`,value:e.id})))},imageName(){const e=this.imagesOption.find((e=>e.value===this.value.image));return e?e.label:"-"},readyToUse(){const e=String(this.value.volumeBackups?.readyToUse||!1);return(0,B.TF)(e)},pvcsResource(){const e=this.$store.getters["harvester/all"](N.YH)||[];return e.find((e=>!this.namespace||e.id===`${this.namespace}/${this.value.volumeName}`))},isLonghornV2(){return this.value.pvc?.storageClass?.isLonghornV2}},watch:{"value.type"(e){"cd-rom"===e&&(this.value["bus"]="sata",this.update())},"value.image"(e){this.checkImageExists(e)},imagesOption(){this.checkImageExists(this.value.image)},pvcsResource:{handler(e){if(e?.spec?.resources?.requests?.storage&&this.isVirtualType){const t=(0,E.ao)(e.spec.resources.requests.storage),a=(0,E.Mo)(t,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size=`${a}Gi`}},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")},onImageChange(){const e=this.$store.getters["harvester/all"](V.rk.IMAGE)?.find((e=>this.value.image===e.id)),t=/iso$/i.test(e?.imageSuffix),a=Math.max(e?.status?.size,e?.status?.virtualSize);if(t?(this.value["type"]="cd-rom",this.value["bus"]="sata"):(this.value["type"]="disk",this.value["bus"]="virtio"),a){let e=Math.ceil(a/1024/1024/1024);t||(e=Math.max(e,10)),this.value["size"]=`${e}Gi`}this.update()},onOpen(){this.images=this.$store.getters["harvester/all"](V.rk.IMAGE)},checkImageExists(e){e&&this.imagesOption.length>0&&!(0,f.jq)(this.imagesOption,"value",e)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistImage.title",{name:e}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistImage.message")},{root:!0}),this.value["image"]="")}}},A=a(47433);const T=(0,A.A)(U,[["render",h]]);var I=T},90819:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var o=a(9274);const s={class:"row mb-20"},l={class:"col span-6","data-testid":"input-hev-name"},r={class:"col span-6","data-testid":"input-hev-type"},n={class:"row mb-20"},i={"data-testid":"input-hav-storage",class:"col span-6"},d={class:"col span-6","data-testid":"input-hev-size"},u={class:"row mb-20"},c={"data-testid":"input-hev-bus",class:"col span-6"},p={key:0,class:"col span-6"},m={class:"row mb-20"},v={key:0,class:"col span-3"};function h(e,t,a,h,f,y){const b=(0,o.resolveComponent)("Loading"),g=(0,o.resolveComponent)("LabeledInput"),k=(0,o.resolveComponent)("InputOrDisplay"),w=(0,o.resolveComponent)("LabeledSelect"),N=(0,o.resolveComponent)("UnitInput"),E=(0,o.resolveComponent)("LabelValue");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(b,{mode:"relative",loading:f.loading},null,8,["loading"]),(0,o.createElementVNode)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.createVNode)(k,{name:e.t("harvester.fields.name"),value:a.value.name,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{value:a.value.name,"onUpdate:value":[t[0]||(t[0]=e=>a.value.name=e),y.update],label:e.t("harvester.fields.name"),mode:a.mode,required:""},null,8,["value","label","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(k,{name:e.t("harvester.fields.type"),value:a.value.type,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{value:a.value.type,"onUpdate:value":[t[1]||(t[1]=e=>a.value.type=e),y.update],label:e.t("harvester.fields.type"),options:f.VOLUME_TYPE,required:"",mode:a.mode},null,8,["value","label","options","mode","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",n,[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(k,{name:e.t("harvester.storage.storageClass.label"),value:a.value.storageClassName,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{value:a.value.storageClassName,"onUpdate:value":[t[2]||(t[2]=e=>a.value.storageClassName=e),y.update],options:y.storageClassOptions,label:e.t("harvester.storage.storageClass.label"),mode:a.mode,disabled:y.isDisabled,required:a.validateRequired},null,8,["value","options","label","mode","disabled","required","onUpdate:value"])])),_:1},8,["name","value","mode"])]),(0,o.createElementVNode)("div",d,[(0,o.createVNode)(k,{name:e.t("harvester.fields.size"),value:a.value.size,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(N,{value:a.value.size,"onUpdate:value":[t[3]||(t[3]=e=>a.value.size=e),y.update],"output-modifier":!0,increment:1024,"input-exponent":3,mode:a.mode,required:a.validateRequired,label:e.t("harvester.fields.size"),disabled:y.isLonghornV2},null,8,["value","mode","required","label","disabled","onUpdate:value"])])),_:1},8,["name","value","mode"])])]),(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("div",c,[(0,o.createVNode)(k,{name:e.t("harvester.virtualMachine.volume.bus"),value:a.value.bus,mode:a.mode},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{value:a.value.bus,"onUpdate:value":[t[4]||(t[4]=e=>a.value.bus=e),y.update],label:e.t("harvester.virtualMachine.volume.bus"),mode:a.mode,options:f.InterfaceOption,required:""},null,8,["value","label","mode","options","onUpdate:value"])])),_:1},8,["name","value","mode"])]),y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.createVNode)(E,{name:e.t("harvester.virtualMachine.volume.encryption"),value:y.encryptionValue},null,8,["name","value"])])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",m,[a.value.volumeBackups&&y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",v,[(0,o.createVNode)(E,{name:e.t("harvester.virtualMachine.volume.readyToUse"),value:y.readyToUse},null,8,["name","value"])])):(0,o.createCommentVNode)("",!0)])])}var f=a(6174),y=a(37814),b=a(76715),g=a(83652),k=a(91847),w=a(45360),N=a(14199),E=a(66905),V=a(53548),C=a(71308),S=a(13451),x=a(82877),B=a(30540),U={name:"HarvesterEditVolume",emits:["update"],components:{InputOrDisplay:b.A,Loading:f.A,LabeledInput:g.o,LabeledSelect:k.A,UnitInput:y.A,LabelValue:C.A},props:{mode:{type:String,default:"create"},isEdit:{type:Boolean,default:!1},namespace:{type:String,default:null},value:{type:Object,default:()=>({})},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data(){return{VOLUME_TYPE:E._w,InterfaceOption:E.$z,loading:!1}},computed:{encryptionValue(){return(0,S.TF)(String(this.value.isEncrypted))},readyToUse(){const e=String(this.value.volumeBackups?.readyToUse||!1);return(0,S.TF)(e)},isView(){return this.mode===V.nW},pvcsResource(){const e=this.$store.getters["harvester/all"](w.YH)||[];return e.find((e=>e.id===`${this.namespace}/${this.value.volumeName}`))},isDisabled(){return!this.value.newCreateId&&this.isEdit&&this.isVirtualType},storageClasses(){return this.$store.getters["harvester/all"](w.fJ)||[]},storageClassOptions(){return this.storageClasses.filter((e=>!e.parameters?.backingImage)).map((e=>{const t=e.isDefault?`${e.name} (${this.t("generic.default")})`:e.name;return{label:t,value:e.name}}))||[]},isLonghornV2(){return this.value.pvc?.storageClass?.isLonghornV2}},watch:{"value.storageClassName":{immediate:!0,handler(e){const t=this.storageClasses.find((t=>t.name===e)),a=t?.provisioner,o=t?.parameters?.dataEngine;this.value.accessMode=a===x.LVM_DRIVER||o===B.DATA_ENGINE_V2?"ReadWriteOnce":"ReadWriteMany"}},"value.type"(e){"cd-rom"===e&&(this.value["bus"]="sata",this.update())},pvcsResource:{handler(e){if(e?.spec?.resources?.requests?.storage){const t=(0,N.ao)(e.spec.resources.requests.storage),a=(0,N.Mo)(t,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size=`${a}Gi`}},deep:!0,immediate:!0}},methods:{update(){this.$emit("update")}}},A=a(47433);const T=(0,A.A)(U,[["render",h]]);var I=T},76715:function(e,t,a){"use strict";a.d(t,{A:function(){return p}});var o=a(9274);const s={key:0,class:"label"},l={class:"text-label"},r={class:"value"};function n(e,t,a,n,i,d){return d.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.renderSlot)(e.$slots,"name",{},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(a.name),1)]),!0)]),(0,o.createElementVNode)("div",r,[(0,o.renderSlot)(e.$slots,"value",{},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(d.displayValue),1)]),!0)])])):(0,o.renderSlot)(e.$slots,"default",{key:1},void 0,!0)}var i=a(53548),d={name:"InputOrDisplay",props:{name:{type:String,required:!0},value:{type:[Number,String,Array,void 0],default:""},mode:{type:String,default:"edit"}},computed:{isView(){return this.mode===i.nW},displayValue(){return Array.isArray(this.value)&&0===this.value.length?"":this.value}}},u=(a(95802),a(47433));const c=(0,u.A)(d,[["render",n],["__scopeId","data-v-1e8967fb"]]);var p=c},71308:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var o=a(9274);const s={class:"label"},l={class:"text-label"},r={class:"value"};function n(e,t,a,n,i,d){return(0,o.openBlock)(),(0,o.createElementBlock)("div",s,[(0,o.createElementVNode)("div",l,[(0,o.renderSlot)(e.$slots,"name",{},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(a.name),1)]),!0)]),(0,o.createElementVNode)("div",r,[(0,o.renderSlot)(e.$slots,"value",{},(()=>[(0,o.createTextVNode)((0,o.toDisplayString)(a.value),1)]),!0)])])}var i={props:{name:{type:String,required:!0},value:{type:[Number,String,void 0],default:""}}},d=(a(76002),a(47433));const u=(0,d.A)(i,[["render",n],["__scopeId","data-v-0b0831bd"]]);var c=u},97102:function(e,t,a){"use strict";a.d(t,{A:function(){return V}});var o=a(9274);const s=e=>((0,o.pushScopeId)("data-v-cf8005d2"),e=e(),(0,o.popScopeId)(),e),l={class:"labels"},r={class:"labels__header"},n={key:0},i={class:"mt-10 mb-10"},d=s((()=>(0,o.createElementVNode)("div",{class:"spacer"},null,-1)));function u(e,t,a,s,u,c){const p=(0,o.resolveComponent)("t"),m=(0,o.resolveComponent)("ToggleSwitch"),v=(0,o.resolveComponent)("KeyValue");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:(0,o.normalizeClass)(c.containerClass)},[(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(a.defaultSectionClass)},[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",r,[a.showLabelTitle?((0,o.openBlock)(),(0,o.createElementBlock)("h3",n,[(0,o.createVNode)(p,{k:"labels.labels.title"})])):(0,o.createCommentVNode)("",!0),a.value.hasSystemLabels?((0,o.openBlock)(),(0,o.createBlock)(m,{key:1,value:u.toggler,"onUpdate:value":t[0]||(t[0]=e=>u.toggler=e),name:"label-system-toggle","on-label":e.t("labels.labels.show")},null,8,["value","on-label"])):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("p",i,[(0,o.createVNode)(p,{k:"labels.labels.description"})]),(0,o.createElementVNode)("div",{class:(0,o.normalizeClass)(c.columnsClass)},[(0,o.renderSlot)(e.$slots,"labels",{toggler:u.toggler},(()=>[(0,o.createVNode)(v,{key:"labels",value:a.value.labels,"protected-keys":a.value.systemLabels||[],"toggle-filter":u.toggler,"add-label":e.t("labels.addLabel"),mode:a.mode,"read-allowed":!1,"value-can-be-empty":!0,"onUpdate:value":t[1]||(t[1]=e=>a.value.setLabels(e))},null,8,["value","protected-keys","toggle-filter","add-label","mode"])]),!0)],2)])],2),d,a.showAnnotations?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(c.sectionClass)},[(0,o.createVNode)(v,{key:"annotations",value:a.value.annotations,"add-label":e.t("labels.addAnnotation"),mode:a.mode,"protected-keys":a.value.systemAnnotations||[],"toggle-filter":u.toggler,title:e.t("labels.annotations.title"),"title-protip":a.annotationTitleTooltip,"read-allowed":!1,"value-can-be-empty":!0,"onUpdate:value":t[2]||(t[2]=e=>a.value.setAnnotations(e))},null,8,["value","add-label","mode","protected-keys","toggle-filter","title","title-protip"])],2)):(0,o.createCommentVNode)("",!0)],2)}var c=a(41398);const p=e=>((0,o.pushScopeId)("data-v-6d08857e"),e=e(),(0,o.popScopeId)(),e),m={class:"toggle-container"},v={class:"switch hand"},h=["checked"],f=p((()=>(0,o.createElementVNode)("span",{class:"slider round"},null,-1)));function y(e,t,a,s,l,r){return(0,o.openBlock)(),(0,o.createElementBlock)("span",m,[(0,o.createElementVNode)("span",{class:(0,o.normalizeClass)(["label no-select hand",{active:!e.state}]),onClick:t[0]||(t[0]=t=>e.toggle(!1))},(0,o.toDisplayString)(e.offLabel),3),(0,o.createElementVNode)("label",v,[(0,o.createElementVNode)("input",{type:"checkbox",checked:e.state,onInput:t[1]||(t[1]=t=>e.toggle(null))},null,40,h),f]),(0,o.createElementVNode)("span",{class:(0,o.normalizeClass)(["label no-select hand",{active:e.state}]),onClick:t[2]||(t[2]=t=>e.toggle(!0))},(0,o.toDisplayString)(e.onLabel),3)])}var b=(0,o.defineComponent)({props:{value:{type:[Boolean,String,Number],default:!1},offValue:{type:[Boolean,String,Number],default:!1},onValue:{type:[Boolean,String,Number],default:!0},offLabel:{type:String,default:""},onLabel:{type:String,default:""}},data(){return{state:!1}},watch:{value:{handler(){this.state=this.value===this.onValue},immediate:!0}},methods:{toggle(e){this.state=null===e?!this.state:e,this.$emit("update:value",this.state?this.onValue:this.offValue)}}}),g=(a(24504),a(47433));const k=(0,g.A)(b,[["render",y],["__scopeId","data-v-6d08857e"]]);var w=k,N={components:{ToggleSwitch:w,KeyValue:c.A},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},displaySideBySide:{type:Boolean,default:!1},defaultContainerClass:{type:String,default:""},defaultSectionClass:{type:String,default:""},labelTitleTooltip:{type:String,default:""},annotationTitleTooltip:{type:String,default:""},showAnnotations:{type:Boolean,default:!0},showLabelTitle:{type:Boolean,default:!0}},data(){return{toggler:!1}},computed:{containerClass(){return`${this.displaySideBySide?"row":""} ${this.defaultContainerClass}`.trim()},sectionClass(){return`${this.displaySideBySide?"col span-6":"row"} ${this.defaultSectionClass}`.trim()},columnsClass(){return(""+(this.displaySideBySide?"col span-6":"row")).trim()}}};a(67775);const E=(0,g.A)(N,[["render",u],["__scopeId","data-v-cf8005d2"]]);var V=E},29592:function(e,t,a){"use strict";a.d(t,{A:function(){return $}});var o=a(9274);const s=e=>((0,o.pushScopeId)("data-v-083aa154"),e=e(),(0,o.popScopeId)(),e),l=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-x"},null,-1))),r=[l],n={key:0},i=s((()=>(0,o.createElementVNode)("span",null,null,-1))),d=["data-testid"],u={key:0},c=["data-testid"],p={key:0},m=["onUpdate:modelValue","mode","data-testid"],v=["data-testid"],h={key:0},f={key:1,class:"no-value"},y=s((()=>(0,o.createElementVNode)("label",{class:"text-muted"},"…",-1))),b=[y],g=["data-testid"],k={key:0},w=["onUpdate:modelValue","mode","disabled","data-testid"],N={key:3,class:"remove-container"},E=["disabled","data-testid","onClick"],V={key:2,class:"mt-20"};function C(e,t,a,s,l,y){const C=(0,o.resolveComponent)("LabeledSelect"),S=(0,o.resolveComponent)("Select"),x=(0,o.resolveComponent)("t");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[a.showRemove&&!y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn role-link remove-expression",onClick:t[0]||(t[0]=t=>e.$emit("remove"))},r)):(0,o.createCommentVNode)("",!0),l.rules.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:1,class:(0,o.normalizeClass)(["match-expression-header",{view:y.isView,"match-expression-header-matching":a.matchingSelectorDisplay}])},[a.matchingSelectorDisplay?((0,o.openBlock)(),(0,o.createElementBlock)("label",n,(0,o.toDisplayString)(e.t("workload.scheduling.affinity.matchExpressions.matchType")),1)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.t("workload.scheduling.affinity.matchExpressions.key")),1),(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.t("workload.scheduling.affinity.matchExpressions.operator")),1),(0,o.createElementVNode)("label",null,(0,o.toDisplayString)(e.t("workload.scheduling.affinity.matchExpressions.value")),1),i],2)):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(l.rules,((e,s)=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:s,class:(0,o.normalizeClass)(["match-expression-row",{view:y.isView,"mb-10":s!==l.rules.length-1,"match-expression-row-matching":a.matchingSelectorDisplay}])},[a.matchingSelectorDisplay?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,"data-testid":`input-match-type-field-${s}`},[y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",u,(0,o.toDisplayString)(e.matching),1)):((0,o.openBlock)(),(0,o.createBlock)(C,{key:1,value:e.matching,"onUpdate:value":t=>e.matching=t,mode:a.mode,options:y.matchingSelectOptions,"data-testid":`input-match-type-field-control-${s}`,onSelecting:y.update},null,8,["value","onUpdate:value","mode","options","data-testid","onSelecting"]))],8,d)):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",{"data-testid":`input-match-expression-key-${s}`},[y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,(0,o.toDisplayString)(e.key),1)):y.hasKeySelectOptions?((0,o.openBlock)(),(0,o.createBlock)(C,{key:2,value:e.key,"onUpdate:value":t=>e.key=t,mode:a.mode,options:a.keysSelectOptions,"data-testid":`input-match-expression-key-control-select-${s}`},null,8,["value","onUpdate:value","mode","options","data-testid"])):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:1,"onUpdate:modelValue":t=>e.key=t,mode:a.mode,"data-testid":`input-match-expression-key-control-${s}`,onInput:t[1]||(t[1]=(...e)=>y.update&&y.update(...e))},null,40,m)),[[o.vModelText,e.key]])],8,c),(0,o.createElementVNode)("div",{"data-testid":`input-match-expression-operator-${s}`},[y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",h,(0,o.toDisplayString)(e.operator),1)):((0,o.openBlock)(),(0,o.createBlock)(S,{key:1,value:e.operator,"onUpdate:value":[t=>e.operator=t,y.update],class:"operator single",options:l.ops,clearable:!1,reduce:e=>e.value,mode:a.mode,"data-testid":`input-match-expression-operator-control-${s}`},null,8,["value","onUpdate:value","options","reduce","mode","data-testid"]))],8,v),"Exists"===e.operator||"DoesNotExist"===e.operator?((0,o.openBlock)(),(0,o.createElementBlock)("div",f,b)):((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:2,"data-testid":`input-match-expression-values-${s}`},[y.isView?((0,o.openBlock)(),(0,o.createElementBlock)("div",k,(0,o.toDisplayString)(e.values),1)):(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("input",{key:1,"onUpdate:modelValue":t=>e.values=t,mode:a.mode,disabled:"Exists"===e.operator||"DoesNotExist"===e.operator,"data-testid":`input-match-expression-values-control-${s}`,onInput:t[2]||(t[2]=(...e)=>y.update&&y.update(...e))},null,40,w)),[[o.vModelText,e.values]])],8,g)),a.showRemoveButton?((0,o.openBlock)(),(0,o.createElementBlock)("div",N,[y.isView?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("button",{key:0,type:"button",class:"btn role-link",style:{padding:"0px"},disabled:"view"===a.mode,"data-testid":`input-match-expression-remove-control-${s}`,onClick:t=>y.removeRule(e)},[(0,o.createVNode)(x,{k:"generic.remove"})],8,E))])):(0,o.createCommentVNode)("",!0)],2)))),128)),!y.isView&&a.showAddButton?((0,o.openBlock)(),(0,o.createElementBlock)("div",V,[(0,o.createElementVNode)("button",{type:"button",class:"btn role-tertiary add","data-testid":"input-match-expression-add-rule",onClick:t[3]||(t[3]=(...e)=>y.addRule&&y.addRule(...e))},[(0,o.createVNode)(x,{k:"workload.scheduling.affinity.matchExpressions.addRule"})])])):(0,o.createCommentVNode)("",!0)])}var S=a(45360),x=a(87109),B=a(35927),U=a(931),A=a(38228),T=a(67975),I=a(91847),M={emits:["update:value","remove"],components:{Select:x.A,LabeledSelect:I.A},props:{value:{type:[Array,Object],default:()=>[]},mode:{type:String,default:"edit"},type:{type:String,default:S.NW},matchingSelectorDisplay:{type:Boolean,default:!1},initialEmptyRow:{type:Boolean,default:!1},showAddButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showRemove:{type:Boolean,default:!0},keysSelectOptions:{type:Array,default:()=>[]}},data(){const e=this.$store.getters["i18n/t"],t=[{label:e("workload.scheduling.affinity.matchExpressions.in"),value:"In"},{label:e("workload.scheduling.affinity.matchExpressions.notIn"),value:"NotIn"},{label:e("workload.scheduling.affinity.matchExpressions.exists"),value:"Exists"},{label:e("workload.scheduling.affinity.matchExpressions.doesNotExist"),value:"DoesNotExist"}],a=[{label:e("workload.scheduling.affinity.matchExpressions.in"),value:"In"},{label:e("workload.scheduling.affinity.matchExpressions.notIn"),value:"NotIn"},{label:e("workload.scheduling.affinity.matchExpressions.exists"),value:"Exists"},{label:e("workload.scheduling.affinity.matchExpressions.doesNotExist"),value:"DoesNotExist"},{label:e("workload.scheduling.affinity.matchExpressions.lessThan"),value:"Lt"},{label:e("workload.scheduling.affinity.matchExpressions.greaterThan"),value:"Gt"}],o=this.type===S.NW?a:t;let s;if(this.matchingSelectorDisplay){const e={matchFields:[],matchExpressions:[]};["matchFields","matchExpressions"].forEach((t=>{e[t]=this.parseRules(this.value[t],t)})),s=[...e.matchFields,...e.matchExpressions]}else(0,U.cy)(this.value)?(s=[...this.value],s=this.parseRules(s)):(s=(0,T.C6)(this.value.matchLabels,this.value.matchExpressions),s=this.parseRules(s));if(!s.length&&this.initialEmptyRow&&!this.isView){const e={key:"",operator:"In",values:""};this.matchingSelectorDisplay&&(e.matching="matchExpressions"),s.push(e)}return{ops:o,rules:s,custom:[]}},computed:{isView(){return"view"===this.mode},node(){return S.NW},pod(){return S.Sm},hasKeySelectOptions(){return!!this.keysSelectOptions?.length},matchingSelectOptions(){return[{label:this.t("workload.scheduling.affinity.matchExpressions.label"),value:"matchExpressions"},{label:this.t("workload.scheduling.affinity.matchFields.label"),value:"matchFields"}]},...(0,B.L8)({t:"i18n/t"})},methods:{parseRules(e,t){return e?.length?e.map((e=>{const a=(0,A.o8)(e);return a.values&&"string"!==typeof a.values&&(a.values=a.values.join(", ")),t&&(a.matching=t),a})):[]},removeRule(e){(0,U.Gj)(this.rules,e),this.update()},addRule(){const e={key:"",operator:"In",values:""};this.matchingSelectorDisplay&&(e.matching="matchExpressions"),this.rules.push(e)},update(){this.$nextTick((()=>{const e=this.rules.map((e=>{const t={key:e.key,operator:e.operator};this.matchingSelectorDisplay&&(t.matching=e.matching);let a=(e.values||"").trim();return"Exists"!==e.operator&&"DoesNotExist"!==e.operator||(a=null),null!==a&&(t.values=a.split(/\s*,\s*/)),t})).filter((e=>!!e));(0,U.cy)(this.value)||this.matchingSelectorDisplay?this.$emit("update:value",e):this.$emit("update:value",(0,T.CR)(e))}))}}},O=(a(67493),a(47433));const _=(0,O.A)(M,[["render",C],["__scopeId","data-v-083aa154"]]);var $=_},85427:function(e,t,a){"use strict";a.d(t,{A:function(){return M}});var o=a(9274);const s={class:"row mb-20"},l={key:0,class:"row"},r={class:"col span-6"};function n(e,t,a,n,i,d){const u=(0,o.resolveComponent)("RadioGroup"),c=(0,o.resolveComponent)("LabeledSelect"),p=(0,o.resolveComponent)("NodeAffinity");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createElementVNode)("div",s,[(0,o.createVNode)(u,{value:i.selectNode,"onUpdate:value":t[0]||(t[0]=e=>i.selectNode=e),name:"selectNode",options:d.selectNodeOptions,mode:a.mode,onInput:d.update},null,8,["value","options","mode","onInput"])]),"nodeSelector"===i.selectNode?((0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createElementVNode)("div",r,[(0,o.createVNode)(c,{value:i.nodeName,"onUpdate:value":t[1]||(t[1]=e=>i.nodeName=e),label:e.t("workload.scheduling.affinity.nodeName"),options:a.nodes||[],mode:a.mode,multiple:!1,loading:a.loading,onInput:d.update},null,8,["value","label","options","mode","loading","onInput"])])])):"affinity"===i.selectNode?((0,o.openBlock)(),(0,o.createBlock)(p,{key:1,value:i.nodeAffinity,"onUpdate:value":t[2]||(t[2]=e=>i.nodeAffinity=e),mode:a.mode,onInput:d.update},null,8,["value","mode","onInput"])):(0,o.createCommentVNode)("",!0)])}var i=a(35927),d=a(92132),u=a(91847);const c={class:"col span-12"},p={class:"row"},m={class:"col span-9"},v={key:0,class:"col span-3"};function h(e,t,a,s,l,r){const n=(0,o.resolveComponent)("LabeledSelect"),i=(0,o.resolveComponent)("LabeledInput"),d=(0,o.resolveComponent)("MatchExpressions"),u=(0,o.resolveComponent)("ArrayListGrouped");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{class:"row","onUpdate:value":t[1]||(t[1]=(...t)=>e.queueUpdate&&e.queueUpdate(...t))},[(0,o.createElementVNode)("div",c,[(0,o.createVNode)(u,{value:e.allSelectorTerms,"onUpdate:value":t[0]||(t[0]=t=>e.allSelectorTerms=t),class:"mt-20",mode:a.mode,"default-add-value":{matchExpressions:[]},"add-label":e.t("workload.scheduling.affinity.addNodeSelector"),onRemove:r.remove},{default:(0,o.withCtx)((t=>[(0,o.createElementVNode)("div",p,[(0,o.createElementVNode)("div",m,[(0,o.createVNode)(n,{options:r.affinityOptions,value:r.priorityDisplay(t.row.value),label:e.t("workload.scheduling.affinity.priority"),mode:a.mode,"data-testid":`node-affinity-priority-index${t.i}`,"onUpdate:value":e=>r.changePriority(t.row.value)},null,8,["options","value","label","mode","data-testid","onUpdate:value"])]),"weight"in t.row.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",v,[(0,o.createVNode)(i,{value:t.row.value.weight,"onUpdate:value":[e=>t.row.value.weight=e,r.update],valueModifiers:{number:!0},mode:a.mode,type:"number",min:"1",max:"100",label:e.t("workload.scheduling.affinity.weight.label"),placeholder:e.t("workload.scheduling.affinity.weight.placeholder"),"data-testid":`node-affinity-weight-index${t.i}`},null,8,["value","onUpdate:value","mode","label","placeholder","data-testid"])])):(0,o.createCommentVNode)("",!0)]),(0,o.createVNode)(d,{value:a.matchingSelectorDisplay?t.row.value:t.row.value.matchExpressions,"matching-selector-display":a.matchingSelectorDisplay,mode:a.mode,class:"col span-12 mt-20",type:r.node,"show-remove":!1,"data-testid":`node-affinity-expressions-index${t.i}`,"onUpdate:value":e=>r.updateExpressions(t.row.value,e)},null,8,["value","matching-selector-display","mode","type","data-testid","onUpdate:value"])])),_:1},8,["value","mode","add-label","onRemove"])])],32)}var f=a(30632),y=a.n(f),b=a(53548),g=a(38228),k=a(45360),w=a(29592),N=a(83652),E=a(13451),V=a(6453),C={emits:["update:value"],components:{ArrayListGrouped:V.A,MatchExpressions:w.A,LabeledSelect:u.A,LabeledInput:N.o},props:{value:{type:Object,default:()=>({})},mode:{type:String,default:"create"},matchingSelectorDisplay:{type:Boolean,default:!1}},data(){if(this.value.required)return{nodeSelectorTerms:this.value.required.nodeSelectorTerms};{const{preferredDuringSchedulingIgnoredDuringExecution:e=[],requiredDuringSchedulingIgnoredDuringExecution:t={}}=this.value,{nodeSelectorTerms:a=[]}=t,o=[...e,...a].map((e=>{const t=(0,g.o8)(e);return t._id=(0,E.vx)(4),e.preference&&(Object.assign(t,e.preference),delete t.preference),t}));return{allSelectorTerms:o,weightedNodeSelectorTerms:e,defaultWeight:1,rerenderNums:(0,E.vx)(4)}}},computed:{...(0,i.L8)({t:"i18n/t"}),isView(){return this.mode===b.nW},hasWeighted(){return!!this.weightedNodeSelectorTerms},node(){return k.NW},affinityOptions(){const e=[this.t("workload.scheduling.affinity.preferred"),this.t("workload.scheduling.affinity.required")];return e}},created(){this.queueUpdate=y()(this.update,500)},methods:{update(){const e={},t={nodeSelectorTerms:[]},a=[];this.allSelectorTerms.forEach((e=>{const o={...e};if(o.matchExpressions&&(o.matchExpressions=(o.matchExpressions||[]).map((e=>{const t={...e};return delete t.matching,t}))),o.matchFields&&(o.matchFields=(o.matchFields||[]).map((e=>{const t={...e};return delete t.matching,t}))),o.weight){const e={weight:o.weight,preference:o};delete e.preference.weight,a.push(e)}else t.nodeSelectorTerms.push(o)})),a.length&&(e.preferredDuringSchedulingIgnoredDuringExecution=a),t.nodeSelectorTerms.length&&(e.requiredDuringSchedulingIgnoredDuringExecution=t),this.$emit("update:value",e)},remove(){this.rerenderNums=(0,E.vx)(4),this.queueUpdate()},changePriority(e){e.weight?delete e["weight"]:e["weight"]=1,this.update()},priorityDisplay(e){return"weight"in e?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},updateExpressions(e,t){const a={matchFields:[],matchExpressions:[]};t.length&&(t.forEach((e=>{a[e.matching||"matchExpressions"].push(e)})),e["matchFields"]=a.matchFields,e["matchExpressions"]=a.matchExpressions,this.update())},get:g.Jt,isEmpty:g.Im}},S=a(47433);const x=(0,S.A)(C,[["render",h]]);var B=x,U=a(90750),A=a(23161),T={components:{RadioGroup:d.z,LabeledSelect:u.A,NodeAffinity:B},props:{value:{type:Object,default:()=>({})},nodes:{type:Array,default:()=>[]},mode:{type:String,default:"create"},loading:{default:!1,type:Boolean}},data(){const e=this.$store.getters["currentProduct"].inStore===U.T;let{nodeName:t=""}=this.value;const{affinity:a={},nodeSelector:o={}}=this.value,{nodeAffinity:s={}}=a;let l=null;return this.value.nodeName?l="nodeSelector":e&&this.value?.nodeSelector?.[A.yA]?(l="nodeSelector",t=o[A.yA]):(0,g.Im)(s)||(l="affinity"),s.requiredDuringSchedulingIgnoredDuringExecution||(s["requiredDuringSchedulingIgnoredDuringExecution"]={nodeSelectorTerms:[]}),s.preferredDuringSchedulingIgnoredDuringExecution||(s["preferredDuringSchedulingIgnoredDuringExecution"]=[]),{selectNode:l,nodeName:t,nodeAffinity:s,nodeSelector:o}},computed:{...(0,i.L8)({t:"i18n/t"}),isView(){return this.mode===b.nW},isHarvester(){return this.$store.getters["currentProduct"].inStore===U.T},selectNodeOptions(){const e=this.isHarvester?"harvester.virtualMachine":"workload",t=[{label:this.t(`${e}.scheduling.affinity.anyNode`),value:null},{label:this.t(`${e}.scheduling.affinity.specificNode`),value:"nodeSelector"},{label:this.t(`${e}.scheduling.affinity.schedulingRules`),value:"affinity"}];return t}},methods:{update(){const{nodeName:e,nodeSelector:t,nodeAffinity:a}=this;switch(this.selectNode){case"nodeSelector":this.isHarvester?Object.assign(this.value,{nodeSelector:{[A.yA]:e}}):Object.assign(this.value,{nodeSelector:t,nodeName:e}),this.value?.affinity?.nodeAffinity&&delete this.value.affinity.nodeAffinity;break;case"affinity":delete this.value.nodeName,delete this.value.nodeSelector,this.value.affinity?Object.assign(this.value.affinity,{nodeAffinity:a}):Object.assign(this.value,{affinity:{nodeAffinity:a}});break;default:delete this.value.nodeName,delete this.value.nodeSelector,this.value?.affinity?.nodeAffinity&&delete this.value.affinity.nodeAffinity}},isEmpty:g.Im},watch:{"value.nodeSelector":{handler(e){if(this.isHarvester&&e?.[A.yA]){this.selectNode="nodeSelector";const t=e[A.yA];this.nodeName=t;const a=this.nodes.map((e=>e.value));t&&!a.includes(t)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.title",{name:t}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.message")},{root:!0}),delete this.value.nodeSelector,this["nodeName"]="",this["selectNode"]=null)}}}}};const I=(0,S.A)(T,[["render",n]]);var M=I},47135:function(e,t,a){"use strict";a.d(t,{A:function(){return g}});var o=a(9274);const s=e=>((0,o.pushScopeId)("data-v-42f8c304"),e=e(),(0,o.popScopeId)(),e),l={class:"password"},r={key:0,class:"addon"},n={key:1,class:"addon"},i={key:0,class:"mt-10 genPassword"},d=s((()=>(0,o.createElementVNode)("i",{class:"icon icon-refresh"},null,-1)));function u(e,t,a,s,u,c){const p=(0,o.resolveComponent)("LabeledInput");return(0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createVNode)(p,(0,o.mergeProps)({ref:"input",value:c.password,"onUpdate:value":t[3]||(t[3]=e=>c.password=e)},c.attributes,{type:a.isRandom||u.reveal?"text":"password",readonly:a.isRandom,label:a.label,required:a.required,disabled:a.isRandom,"ignore-password-managers":a.ignorePasswordManagers,mode:a.mode,onBlur:t[4]||(t[4]=t=>e.$emit("blur",t))}),{suffix:(0,o.withCtx)((()=>[a.isRandom?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createElementVNode)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.withModifiers)((e=>c.copyTextToClipboard(c.password)),["prevent","stop"]))},(0,o.toDisplayString)(e.t("action.copy")),1)])):((0,o.openBlock)(),(0,o.createElementBlock)("div",n,[u.reveal?((0,o.openBlock)(),(0,o.createElementBlock)("a",{key:0,tabindex:"-1",href:"#",onClick:t[1]||(t[1]=(0,o.withModifiers)((e=>u.reveal=!1),["prevent","stop"]))},(0,o.toDisplayString)(e.t("action.hide")),1)):((0,o.openBlock)(),(0,o.createElementBlock)("a",{key:1,tabindex:"-1",href:"#",onClick:t[2]||(t[2]=(0,o.withModifiers)((e=>u.reveal=!0),["prevent","stop"]))},(0,o.toDisplayString)(e.t("action.show")),1))]))])),_:1},16,["value","type","readonly","label","required","disabled","ignore-password-managers","mode"]),a.isRandom?((0,o.openBlock)(),(0,o.createElementBlock)("div",i,[(0,o.createElementVNode)("a",{href:"#",onClick:t[5]||(t[5]=(0,o.withModifiers)(((...e)=>c.generatePassword&&c.generatePassword(...e)),["prevent","stop"]))},[d,(0,o.createTextVNode)(" "+(0,o.toDisplayString)(e.t("changePassword.newGeneratedPassword")),1)])])):(0,o.createCommentVNode)("",!0)])}var c=a(35927),p=a(83652),m=a(13451),v=a(45347),h=a(53548),f={emits:["update:value","blur"],components:{LabeledInput:p.o},props:{value:{default:"",type:String},isRandom:{default:!1,type:Boolean},label:{default:"",type:String},name:{default:"",type:String},autocomplete:{type:String,default:""},required:{default:!1,type:Boolean},ignorePasswordManagers:{default:!1,type:Boolean},mode:{type:String,default:h.YQ}},data(){return{reveal:!1}},computed:{...(0,c.L8)({t:"i18n/t"}),password:{get(){return this.value},set(e){this.$emit("update:value",e)}},attributes(){const e={};return this.name&&(e.id=this.name,e.name=this.name),this.autocomplete&&(e.autocomplete=this.autocomplete),e}},watch:{isRandom(){this.isRandom&&this.generatePassword()}},created(){this.isRandom&&this.generatePassword()},methods:{copyTextToClipboard:v.e,generatePassword(){this.password=(0,m.vx)(16,m.LQ.ALPHA_NUM)},show(e){this.reveal=e},focus(){this.$refs.input.$refs.value.focus()}}},y=(a(22403),a(47433));const b=(0,y.A)(f,[["render",u],["__scopeId","data-v-42f8c304"]]);var g=b},21684:function(e,t,a){"use strict";a.d(t,{A:function(){return I}});var o=a(9274);const s={class:"col span-12"},l={class:"row mt-20 mb-20"},r={class:"col span-6"},n={class:"col span-6"},i={class:"row"},d={key:0,class:"row mt-10 mb-20"},u={class:"row mt-20"},c={class:"col span-9"},p={key:0,class:"col span-3"};function m(e,t,a,m,v,h){const f=(0,o.resolveComponent)("LabeledSelect"),y=(0,o.resolveComponent)("RadioGroup"),b=(0,o.resolveComponent)("LabeledInput"),g=(0,o.resolveComponent)("MatchExpressions"),k=(0,o.resolveComponent)("ArrayListGrouped");return(0,o.openBlock)(),(0,o.createElementBlock)("div",{style:{width:"100%"},class:"row","onUpdate:value":t[1]||(t[1]=(...t)=>e.queueUpdate&&e.queueUpdate(...t))},[(0,o.createElementVNode)("div",s,[(0,o.createVNode)(k,{value:v.allSelectorTerms,"onUpdate:value":t[0]||(t[0]=e=>v.allSelectorTerms=e),class:"mt-20","default-add-value":v.defaultAddValue,mode:a.mode,"add-label":h.addLabel,onRemove:h.remove},{default:(0,o.withCtx)((t=>[(0,o.createElementVNode)("div",l,[(0,o.createElementVNode)("div",r,[(0,o.createVNode)(f,{mode:a.mode,options:[e.t("workload.scheduling.affinity.affinityOption"),e.t("workload.scheduling.affinity.antiAffinityOption")],value:t.row.value._anti?e.t("workload.scheduling.affinity.antiAffinityOption"):e.t("workload.scheduling.affinity.affinityOption"),label:e.t("workload.scheduling.affinity.type"),"data-testid":`pod-affinity-type-index${t.i}`,"onUpdate:value":e=>t.row.value._anti=!t.row.value._anti},null,8,["mode","options","value","label","data-testid","onUpdate:value"])]),(0,o.createElementVNode)("div",n,[(0,o.createVNode)(f,{mode:a.mode,options:[e.t("workload.scheduling.affinity.preferred"),e.t("workload.scheduling.affinity.required")],value:h.priorityDisplay(t.row.value),label:e.t("workload.scheduling.affinity.priority"),"data-testid":`pod-affinity-priority-index${t.i}`,"onUpdate:value":e=>h.changePriority(t.row.value,t.i)},null,8,["mode","options","value","label","data-testid","onUpdate:value"])])]),(0,o.createElementVNode)("div",i,[(0,o.createVNode)(y,{options:h.namespaceSelectionOptions,labels:h.namespaceSelectionLabels,name:`namespaces-${t.row.value._id}`,mode:a.mode,value:t.row.value._namespaceOption,"data-testid":`pod-affinity-namespacetype-index${t.i}`,"onUpdate:value":e=>h.changeNamespaceMode(e,t.row.value,t.i)},null,8,["options","labels","name","mode","value","data-testid","onUpdate:value"])]),t.row.value._namespaceOption===v.NAMESPACE_SELECTION_OPTION_VALUES.SELECTED?((0,o.openBlock)(),(0,o.createElementBlock)("div",d,[h.hasNamespaces&&!a.forceInputNamespaceSelection?((0,o.openBlock)(),(0,o.createBlock)(f,{key:0,value:t.row.value.namespaces,"onUpdate:value":[e=>t.row.value.namespaces=e,e=>h.updateNamespaces(t.row.value,t.row.value.namespaces)],mode:a.mode,multiple:!0,taggable:!0,options:h.allNamespacesOptions,label:h.labeledInputNamespaceLabel,"data-testid":`pod-affinity-namespace-select-index${t.i}`},null,8,["value","onUpdate:value","mode","options","label","data-testid"])):((0,o.openBlock)(),(0,o.createBlock)(b,{key:1,value:t.row.value._namespaces,"onUpdate:value":[e=>t.row.value._namespaces=e,e=>h.updateNamespaces(t.row.value,t.row.value._namespaces)],mode:a.mode,label:h.labeledInputNamespaceLabel,placeholder:e.t("harvesterManager.affinity.namespaces.placeholder"),"data-testid":`pod-affinity-namespace-input-index${t.i}`},null,8,["value","onUpdate:value","mode","label","placeholder","data-testid"]))])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(g,{mode:a.mode,class:"col span-12 mt-20",type:h.pod,value:h.get(t.row.value,"labelSelector.matchExpressions"),"show-remove":!1,"data-testid":`pod-affinity-expressions-index${t.i}`,"onUpdate:value":e=>h.updateLabelSelector(e,t)},null,8,["mode","type","value","data-testid","onUpdate:value"]),(0,o.createElementVNode)("div",u,[(0,o.createElementVNode)("div",c,[h.hasNodes?((0,o.openBlock)(),(0,o.createBlock)(f,{key:0,value:t.row.value.topologyKey,"onUpdate:value":[e=>t.row.value.topologyKey=e,h.update],taggable:!0,searchable:!0,"close-on-select":!1,mode:a.mode,required:"",label:e.t("workload.scheduling.affinity.topologyKey.label"),placeholder:h.topologyKeyPlaceholder,options:h.existingNodeLabels,disabled:"view"===a.mode,loading:a.loading,"data-testid":`pod-affinity-topology-select-index${t.i}`},null,8,["value","onUpdate:value","mode","label","placeholder","options","disabled","loading","data-testid"])):((0,o.openBlock)(),(0,o.createBlock)(b,{key:1,value:t.row.value.topologyKey,"onUpdate:value":[e=>t.row.value.topologyKey=e,h.update],mode:a.mode,label:e.t("workload.scheduling.affinity.topologyKey.label"),placeholder:h.topologyKeyPlaceholder,required:"","data-testid":`pod-affinity-topology-input-index${t.i}`},null,8,["value","onUpdate:value","mode","label","placeholder","data-testid"]))]),"weight"in t.row.value?((0,o.openBlock)(),(0,o.createElementBlock)("div",p,[(0,o.createVNode)(b,{value:t.row.value.weight,"onUpdate:value":[e=>t.row.value.weight=e,h.update],valueModifiers:{number:!0},mode:a.mode,type:"number",min:"1",max:"100",label:e.t("workload.scheduling.affinity.weight.label"),placeholder:e.t("workload.scheduling.affinity.weight.placeholder"),"data-testid":`pod-affinity-weight-index${t.i}`},null,8,["value","onUpdate:value","mode","label","placeholder","data-testid"])])):(0,o.createCommentVNode)("",!0)])])),_:1},8,["value","default-add-value","mode","add-label","onRemove"])])],32)}var v=a(35927),h=a(53548),f=a(38228),y=a(45360),b=a(29592),g=a(91847),k=a(92132),w=a(83652),N=a(13451),E=a(31966),V=a(30632),C=a.n(V),S=a(6453),x=a(931);const B={POD:"pod",ALL:"all",SELECTED:"selected"};var U={emits:["update"],components:{ArrayListGrouped:S.A,MatchExpressions:b.A,LabeledSelect:g.A,RadioGroup:k.z,LabeledInput:w.o},props:{value:{type:Object,default:()=>({})},field:{type:String,default:"affinity"},mode:{type:String,default:"create"},nodes:{type:Array,default:()=>[]},namespaces:{type:Array,default:null},allNamespacesOptionAvailable:{default:!1,type:Boolean},forceInputNamespaceSelection:{default:!1,type:Boolean},removeLabeledInputNamespaceLabel:{default:!1,type:Boolean},overwriteLabels:{type:Object,default:null},loading:{default:!1,type:Boolean}},data(){this.value[this.field]||(this.value[this.field]={});const{podAffinity:e={},podAntiAffinity:t={}}=this.value[this.field],a=[...e.preferredDuringSchedulingIgnoredDuringExecution||[],...e.requiredDuringSchedulingIgnoredDuringExecution||[]].map((e=>{let t=(0,f.o8)(e);return t._id=(0,N.vx)(4),t._anti=!1,e.podAffinityTerm?(Object.assign(t,e.podAffinityTerm),t=this.parsePodAffinityTerm(t),delete t.podAffinityTerm):t=this.parsePodAffinityTerm(t),t})),o=[...t.preferredDuringSchedulingIgnoredDuringExecution||[],...t.requiredDuringSchedulingIgnoredDuringExecution||[]].map((e=>{let t=(0,f.o8)(e);return t._id=(0,N.vx)(4),t._anti=!0,e.podAffinityTerm?(Object.assign(t,e.podAffinityTerm),t=this.parsePodAffinityTerm(t),delete t.podAffinityTerm):t=this.parsePodAffinityTerm(t),t})),s=[...a,...o];return{allSelectorTerms:s,defaultWeight:1,rerenderNums:(0,N.vx)(4),NAMESPACE_SELECTION_OPTION_VALUES:B,defaultAddValue:{_namespaceOption:B.POD,matchExpressions:[],namespaces:null,_namespaces:null}}},computed:{...(0,v.L8)({t:"i18n/t"}),isView(){return this.mode===h.nW},pod(){return y.Sm},node(){return y.NW},labeledInputNamespaceLabel(){return this.removeLabeledInputNamespaceLabel?"":this.overwriteLabels?.namespaceInputLabel||this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")},allNamespacesOptions(){const e=this.$store.getters["currentStore"](y.CU),t=this.namespaces||this.$store.getters[`${e}/all`](y.CU),a=(0,E.Ul)(t.map((e=>({label:e.nameDisplay,value:e.id}))),"label");return a},existingNodeLabels(){return(0,x.oQ)(this.nodes)},hasNodes(){return this.nodes.length},namespaceSelectionOptions(){return this.allNamespacesOptionAvailable?[B.POD,B.ALL,B.SELECTED]:[B.POD,B.SELECTED]},namespaceSelectionLabels(){return this.overwriteLabels?.namespaceSelectionLabels?this.overwriteLabels?.namespaceSelectionLabels:this.allNamespacesOptionAvailable?[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.allNamespaces"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]:[this.t("workload.scheduling.affinity.thisPodNamespace"),this.t("workload.scheduling.affinity.matchExpressions.inNamespaces")]},addLabel(){return this.overwriteLabels?.addLabel||this.t("podAffinity.addLabel")},topologyKeyPlaceholder(){return this.overwriteLabels?.topologyKeyPlaceholder||this.t("workload.scheduling.affinity.topologyKey.placeholder")},hasNamespaces(){return this.allNamespacesOptions.length}},created(){this.queueUpdate=C()(this.update,500)},methods:{parsePodAffinityTerm(e){return e.namespaceSelector&&"object"===typeof e.namespaceSelector&&!Object.keys(e.namespaceSelector).length&&this.allNamespacesOptionAvailable?e._namespaceOption=B.ALL:e.namespaces?.length?e._namespaceOption=B.SELECTED:e._namespaceOption=B.POD,e._namespaces=(e.namespaces||[]).toString(),e},update(){const e={requiredDuringSchedulingIgnoredDuringExecution:[],preferredDuringSchedulingIgnoredDuringExecution:[]},t={requiredDuringSchedulingIgnoredDuringExecution:[],preferredDuringSchedulingIgnoredDuringExecution:[]};this.allSelectorTerms.forEach((a=>{if(a._anti)if(a.weight){const e={podAffinityTerm:{...a},weight:a.weight||this.defaultWeight};delete e.podAffinityTerm.weight,t.preferredDuringSchedulingIgnoredDuringExecution.push(e)}else t.requiredDuringSchedulingIgnoredDuringExecution.push(a);else if(a.weight){const t={podAffinityTerm:a,weight:a.weight||this.defaultWeight};e.preferredDuringSchedulingIgnoredDuringExecution.push(t)}else e.requiredDuringSchedulingIgnoredDuringExecution.push(a)})),Object.assign(this.value[this.field],{podAffinity:e,podAntiAffinity:t}),this.$emit("update",this.value)},remove(){this.rerenderNums=(0,N.vx)(4),this.queueUpdate()},changePriority(e,t){e.weight?delete e.weight:e.weight=this.defaultWeight,this.allSelectorTerms[t]=(0,f.o8)(e),this.queueUpdate()},priorityDisplay(e){return"weight"in e?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},changeNamespaceMode(e,t,a){switch(t["_namespaceOption"]=e,e){case B.POD:t.namespaces=null,t._namespaces=null,(t.namespaceSelector||null===t.namespaceSelector)&&delete t.namespaceSelector;break;case B.ALL:t.namespaceSelector={},(t.namespaces||null===t.namespaces)&&delete t.namespaces,(t._namespaces||null===t._namespaces)&&delete t._namespaces;break;default:t["namespaces"]=[],t["_namespaces"]="",(t.namespaceSelector||null===t.namespaceSelector)&&delete t.namespaceSelector;break}this.allSelectorTerms[a]=t,this.queueUpdate()},updateNamespaces(e,t){let a=t;"string"===typeof t&&(a=t.split(",").map((e=>e.trim())).filter((e=>e?.length))),e["namespaces"]=a,this.queueUpdate()},updateLabelSelector(e,t){this.set(t.row.value,"labelSelector.matchExpressions",e),this.queueUpdate()},isEmpty:f.Im,get:f.Jt,set:f.hZ}},A=(a(6314),a(47433));const T=(0,A.A)(U,[["render",m]]);var I=T},69657:function(e,t,a){"use strict";a.d(t,{A:function(){return T}});var o=a(9274);const s={class:"mt-20"};function l(e,t,a,l,r,n){const i=(0,o.resolveComponent)("Conditions"),d=(0,o.resolveComponent)("Tab"),u=(0,o.resolveComponent)("SortableTable"),c=(0,o.resolveComponent)("RelatedResources"),p=(0,o.resolveComponent)("Tabbed"),m=(0,o.resolveDirective)("t");return(0,o.openBlock)(),(0,o.createBlock)(p,(0,o.mergeProps)(e.$attrs,{"default-tab":a.defaultTab,onChanged:n.tabChange}),{default:(0,o.withCtx)((()=>[(0,o.renderSlot)(e.$slots,"default"),r.showConditions?((0,o.openBlock)(),(0,o.createBlock)(d,{key:0,"label-key":"resourceTabs.conditions.tab",name:"conditions",weight:-1,"display-alert-icon":n.conditionsHaveIssues},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{value:a.value},null,8,["value"])])),_:1},8,["display-alert-icon"])):(0,o.createCommentVNode)("",!0),n.showEvents?((0,o.openBlock)(),(0,o.createBlock)(d,{key:1,"label-key":"resourceTabs.events.tab",name:"events",weight:-2},{default:(0,o.withCtx)((()=>["events"===r.selectedTab?((0,o.openBlock)(),(0,o.createBlock)(u,{key:0,rows:n.events,headers:n.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"},null,8,["rows","headers"])):(0,o.createCommentVNode)("",!0)])),_:1})):(0,o.createCommentVNode)("",!0),n.showRelated?((0,o.openBlock)(),(0,o.createBlock)(d,{key:2,name:"related","label-key":"resourceTabs.related.tab",weight:-3},{default:(0,o.withCtx)((()=>[(0,o.withDirectives)((0,o.createElementVNode)("h3",null,null,512),[[m,"resourceTabs.related.from"]]),(0,o.createVNode)(c,{"ignore-types":[a.value.type],value:a.value,direction:"from"},null,8,["ignore-types","value"]),(0,o.withDirectives)((0,o.createElementVNode)("h3",s,null,512),[[m,"resourceTabs.related.to"]]),(0,o.createVNode)(c,{"ignore-types":[a.value.type],value:a.value,direction:"to"},null,8,["ignore-types","value"])])),_:1})):(0,o.createCommentVNode)("",!0),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.extensionTabs,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(d,{key:`${e.name}${t}`,name:e.name,label:e.label,"label-key":e.labelKey,weight:e.weight,tooltip:e.tooltip,"show-header":e.showHeader,"display-alert-icon":e.displayAlertIcon,error:e.error,badge:e.badge},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(e.component),{resource:a.value},null,8,["resource"]))])),_:2},1032,["name","label","label-key","weight","tooltip","show-header","display-alert-icon","error","badge"])))),128))])),_:3},16,["default-tab","onChanged"])}var r=a(50420),n=a(71820),i=a(65841);function d(e,t,a,s,l,r){const n=(0,o.resolveComponent)("SortableTable");return(0,o.openBlock)(),(0,o.createBlock)(n,{headers:r.headers,rows:r.rows,"key-field":"condition","default-sort-by":"condition","table-actions":!1,"row-actions":!1,search:!1},{"cell:condition":(0,o.withCtx)((({row:e})=>[(0,o.createElementVNode)("span",{class:(0,o.normalizeClass)({"text-error":e.error})},(0,o.toDisplayString)(e.condition),3)])),"cell:status":(0,o.withCtx)((({row:e})=>[(0,o.createElementVNode)("span",{class:(0,o.normalizeClass)({"text-error":e.error})},(0,o.toDisplayString)(e.status),3)])),_:1},8,["headers","rows"])}var u=a(54372),c={components:{SortableTable:u.A},props:{value:{type:Object,default:()=>({})}},computed:{headers(){return[{name:"condition",labelKey:"tableHeaders.condition",value:"condition",width:150,sort:"condition",dashIfEmpty:!0},{name:"status",labelKey:"tableHeaders.status",value:"status",width:75,sort:"status",dashIfEmpty:!0},{name:"time",labelKey:"tableHeaders.updated",value:"time",sort:"time",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,dashIfEmpty:!0},{name:"message",labelKey:"tableHeaders.message",value:"message",sort:["message"],dashIfEmpty:!0}]},rows(){return(this.value.status?.conditions||[]).map((e=>{let t=e.message||"";return e.reason&&(t=`[${e.reason}] ${t}`.trim()),{condition:e.type||"Unknown",status:e.status||"Unknown",error:e.error,time:e.lastProbeTime||e.lastUpdateTime||e.lastTransitionTime,message:t}}))}}},p=a(47433);const m=(0,p.A)(c,[["render",d]]);var v=m,h=a(45360),f=a(53548);function y(e,t,a,s,l,r){const n=(0,o.resolveComponent)("BadgeState"),i=(0,o.resolveComponent)("ResourceTable");return(0,o.openBlock)(),(0,o.createBlock)(i,{schema:null,rows:r.rows,headers:r.headers,search:!1,"table-actions":!1,namespaced:!0,"mangle-action-resources":r.getRealResources,"paging-label":"sortableTable.paging.generic",groupable:!1},{"cell:state":(0,o.withCtx)((({row:e})=>[e.real?((0,o.openBlock)(),(0,o.createBlock)(n,{key:0,value:e.real},null,8,["value"])):((0,o.openBlock)(),(0,o.createBlock)(n,{key:1,value:e},null,8,["value"]))])),_:1},8,["rows","headers","mangle-action-resources"])}var b=a(43673),g=a(89022),k=a(43462),w=a(31966),N=a(24494),E=a(77809),V={components:{ResourceTable:b.A,BadgeState:E.j},props:{value:{type:Object,required:!0},rel:{type:String,default:null},direction:{type:String,default:"to"},ignoreTypes:{type:Array,default:()=>[]}},data(){return{loadedResources:1}},computed:{filteredRelationships(){let e=this.value?.metadata?.relationships||[];return e=e.filter((e=>{const t=e[`${this.direction}Type`];return!(!t||this.ignoreTypes.includes(t))&&(!this.rel||e.rel===this.rel)})),e},rows(){if(this.loadedResources<1)return;const e=this.$store.getters["clusterId"],t=this.$store.getters["currentStore"](),a=[];for(const o of this.filteredRelationships){const s=o.state||"active",l=(0,g.uU)(s,o.error,o.transitioning),r=o[`${this.direction}Type`],n=this.$store.getters[`${t}/schemaFor`](r);let i=o[`${this.direction}Id`];if(!i)continue;let d=null;const u=i.indexOf("/"),c=`${r}/${d}/${i}`;u>0&&(d=i.substr(0,u),i=i.substr(u+1));const p={name:`c-cluster-product-resource${d?"-namespace":""}-id`,params:{product:N.o,cluster:"management"===t?"local":e,resource:r,namespace:d,id:i}};a.push({type:r,real:this.$store.getters[`${t}/byId`](r,o[`${this.direction}Id`]),id:o[`${this.direction}Id`],state:s,metadata:{namespace:d,name:i},_key:c,name:i,namespace:d,nameDisplay:i,nameSort:(0,w.RY)(i).toLowerCase(),stateColor:l,detailLocation:p,typeDisplay:this.$store.getters["type-map/labelFor"](n),stateDisplay:(0,g.ch)(s),stateBackground:l.replace("text-","bg-"),groupByLabel:d})}return a},headers(){return[k.c4,k.ZE,k.o_,k.CU]}},methods:{async getRealResources(e){const t=this.$store.getters["currentStore"](),a=await Promise.allSettled(e.map((e=>this.$store.dispatch(`${t}/find`,{type:e.type,id:e.id})))),o=[];for(let s=0;s<a.length;s++)"fulfilled"===a[s].status&&o.push(a[s].value);return this.loadedResources++,o}}};const C=(0,p.A)(V,[["render",y]]);var S=C,x=a(30587),B=a(86091),U={name:"ResourceTabs",components:{Tabbed:r.A,Tab:n.A,Conditions:v,SortableTable:u.A,RelatedResources:S},mixins:[i.A],props:{value:{type:Object,default:()=>({})},mode:{type:String,default:f.nW},defaultTab:{type:String,default:null},needConditions:{type:Boolean,default:!0},needEvents:{type:Boolean,default:!0},needRelated:{type:Boolean,default:!0},extensionParams:{type:Object,default:null}},data(){const e=this.$store.getters["currentStore"](h.ll);return{hasEvents:this.$store.getters[`${e}/schemaFor`](h.ll),allEvents:[],selectedTab:this.defaultTab,didLoadEvents:!1,extensionTabs:(0,B.A)(this,x.c7.TAB,x.lX.RESOURCE_DETAIL,this.$route,this,this.extensionParams),inStore:e,showConditions:!1}},beforeUnmount(){this.$store.dispatch("cluster/forgetType",h.ll)},fetch(){this.setShowConditions()},computed:{showEvents(){return this.isView&&this.needEvents&&this.hasEvents},showRelated(){return this.isView&&this.needRelated},eventHeaders(){return[{name:"type",label:this.t("tableHeaders.type"),value:"eventType",sort:"eventType"},{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"}]},events(){return this.allEvents.filter((e=>e.involvedObject?.uid===this.value?.metadata?.uid)).map((e=>({reason:`${e.reason||this.t("generic.unknown")}${e.count>1?` (${e.count})`:""}`.trim(),message:e.message||this.t("generic.unknown"),date:e.lastTimestamp||e.firstTimestamp||e.metadata.creationTimestamp,eventType:e.eventType})))},conditionsHaveIssues(){return!!this.showConditions&&this.value.status?.conditions?.filter((e=>!(0,g.rv)(e))).some((e=>e.error))}},methods:{tabChange(e){if(this.selectedTab=e?.selectedName,!this.didLoadEvents&&"events"===this.selectedTab){const e=this.$store.getters["currentStore"](h.ll);this.$store.dispatch(`${e}/findAll`,{type:h.ll}).then((e=>{this.allEvents=e,this.didLoadEvents=!0}))}},async setShowConditions(){this.isView&&this.needConditions&&this.value?.type&&this.schema?.fetchResourceFields&&(await this.schema.fetchResourceFields(),this.showConditions=this.$store.getters[`${this.inStore}/pathExistsInSchema`](this.value.type,"status.conditions"))}}};const A=(0,p.A)(U,[["render",l]]);var T=A},37814:function(e,t,a){"use strict";a.d(t,{A:function(){return c}});var o=a(9274);function s(e,t,a,s,l,r){const n=(0,o.resolveComponent)("LabeledInput");return(0,o.openBlock)(),(0,o.createBlock)(n,(0,o.mergeProps)({ref:"value",value:r.displayValue},e.$attrs,{type:"number",min:a.min,mode:a.mode,label:a.label,delay:a.delay,"label-key":a.labelKey,tooltip:a.tooltip,"tooltip-key":a.tooltipKey,required:a.required,placeholder:a.placeholder,"hide-arrows":a.hideArrows,onChange:t[0]||(t[0]=e=>r.update(e.target.value)),onBlur:t[1]||(t[1]=e=>r.update(e.target.value))}),{suffix:(0,o.withCtx)((()=>[r.displayUnit?((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:0,class:(0,o.normalizeClass)(["addon",{"with-tooltip":a.tooltip||a.tooltipKey}])},(0,o.toDisplayString)(r.displayUnit),3)):(0,o.createCommentVNode)("",!0)])),_:1},16,["value","min","mode","label","delay","label-key","tooltip","tooltip-key","required","placeholder","hide-arrows"])}var l=a(14199),r=a(83652),n=a(53548),i={components:{LabeledInput:r.o},emits:["update:value"],props:{outputAs:{type:String,default:"number"},outputModifier:{type:Boolean,default:!1},inputExponent:{type:Number,default:0},baseUnit:{type:String,default:"B"},hideArrows:{type:Boolean,default:!1},increment:{type:Number,default:1e3},suffix:{type:String,default:null},mode:{type:String,default:n.G5},value:{type:[Number,String],default:null},label:{type:String,default:null},labelKey:{type:String,default:null},tooltip:{type:[String,Object],default:null},tooltipKey:{type:String,default:null},required:{type:Boolean,default:!1},min:{type:[Number,String],default:0},placeholder:{type:[String,Number],default:""},delay:{type:Number,default:0},positive:{type:Boolean,default:!1}},computed:{unit(){let e;return e=this.inputExponent>=0?l.QN[this.inputExponent]:l.kq[-1*this.inputExponent],1024===this.increment&&e&&(e+="i"),e},parsedValue(){return"string"===typeof this.value?(0,l.ao)(this.value):this.value},displayValue(){let e="";return(this.parsedValue||0===this.parsedValue)&&(e=(0,l.Mo)(this.parsedValue,{increment:this.increment,addSuffix:!1,maxExponent:this.inputExponent,minExponent:this.inputExponent})),e},displayUnit(){return this.suffix?this.suffix:this.unit+this.baseUnit}},methods:{focus(){const e=this.$refs.value;e&&e.focus()},update(e){let t=""===e?null:e;this.positive&&e<0&&(t=0),this.outputModifier?t=null===t?null:`${e}${this.unit}`:"string"===this.outputAs?t=null===t?"":`${e}`:t&&(t=this.unit?(0,l.ao)(`${t}${this.unit}`):parseInt(t)),this.$emit("update:value",t)}}},d=(a(16403),a(47433));const u=(0,d.A)(i,[["render",s],["__scopeId","data-v-26d12f1c"]]);var c=u},24373:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".node-selector{position:relative}",""]),t["default"]=n},19044:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".vm__credentials-users .hasUsers.labeled-select.edit.taggable .labeled-tooltip .icon.status-icon{top:30px}",""]),t["default"]=n},67647:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".volume-source[data-v-61977bc4]{position:relative}.remove-vol[data-v-61977bc4]{position:absolute;top:10px;right:10px;padding:0}",""]),t["default"]=n},34213:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".action[data-v-7d19b7bd]{display:flex;flex-direction:row-reverse}",""]),t["default"]=n},67381:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,"[data-v-1613a356]  .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-1613a356]  .resource-yaml .yaml-editor{flex:1;min-height:200px}[data-v-1613a356]  .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:200px}",""]),t["default"]=n},47905:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".yaml[data-v-2d3a6d84]{height:350px;overflow:auto}[data-v-2d3a6d84]  .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-2d3a6d84]  .resource-yaml .yaml-editor{flex:1;min-height:350px}[data-v-2d3a6d84]  .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:350px}",""]),t["default"]=n},87582:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".infoBox[data-v-697c87ca]{position:relative}.remove-vol[data-v-697c87ca]{position:absolute;top:10px;right:16px;padding:0;max-height:28px;min-height:28px}",""]),t["default"]=n},61251:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".box[data-v-2fc8bb3a]{position:relative}.title[data-v-2fc8bb3a]{display:flex}.title .state[data-v-2fc8bb3a]{font-size:16px}.remove[data-v-2fc8bb3a]{position:absolute;top:10px;right:10px;padding:0}.bootOrder[data-v-2fc8bb3a]{display:flex;align-items:center}.buttons[data-v-2fc8bb3a]{width:100%;display:flex;justify-content:flex-end}.volume-status[data-v-2fc8bb3a]:first-letter{text-transform:uppercase}.resource-external[data-v-2fc8bb3a]{display:flex;justify-content:center;align-items:center}.banner[data-v-2fc8bb3a]{margin:10px 0}",""]),t["default"]=n},53976:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,'.toggle-container[data-v-6d08857e]{align-items:center;display:flex}.toggle-container span[data-v-6d08857e]:first-child{padding-right:6px}.toggle-container span[data-v-6d08857e]:last-child{padding-left:6px}.switch[data-v-6d08857e]{position:relative;display:inline-block;width:48px;height:24px}.switch input[data-v-6d08857e]{opacity:0;width:0;height:0}.slider[data-v-6d08857e]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--checkbox-disabled-bg)}.slider[data-v-6d08857e],.slider[data-v-6d08857e]:before{position:absolute;transition:.4s}.slider[data-v-6d08857e]:before{content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:var(--checkbox-tick)}input:checked+.slider[data-v-6d08857e]{background-color:var(--checkbox-ticked-bg)}input:focus+.slider[data-v-6d08857e]{box-shadow:0 0 1px var(--checkbox-ticked-bg)}input:checked+.slider[data-v-6d08857e]:before{transform:translateX(24px)}.slider.round[data-v-6d08857e]{border-radius:34px}.slider.round[data-v-6d08857e]:before{border-radius:50%}',""]),t["default"]=n},10458:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".label[data-v-1e8967fb]{display:flex;flex-direction:column}.label .value[data-v-1e8967fb]{font-size:14px;line-height:18px}",""]),t["default"]=n},93154:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".label[data-v-0b0831bd]{display:flex;flex-direction:column}.label .value[data-v-0b0831bd]{font-size:14px;line-height:18px}",""]),t["default"]=n},9471:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".labels__header[data-v-cf8005d2]{display:flex;justify-content:space-between}",""]),t["default"]=n},87301:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".operator .vs__dropdown-option[data-v-083aa154]{padding:3px 6px 3px 6px!important}.remove-expression[data-v-083aa154]{padding:8px;position:absolute;margin-bottom:10px;right:0;top:0;z-index:2}.remove-expression i[data-v-083aa154]{font-size:2em}.remove-container[data-v-083aa154]{display:flex;justify-content:center}.match-expression-header[data-v-083aa154],.match-expression-row[data-v-083aa154]{display:grid;grid-template-columns:1fr 1fr 1fr;margin:5px 0;grid-gap:1.75%}.match-expression-header>LABEL[data-v-083aa154],.match-expression-row>LABEL[data-v-083aa154]{margin:0}.match-expression-header[data-v-083aa154]:not(.view),.match-expression-row[data-v-083aa154]:not(.view){grid-template-columns:repeat(3,1fr) 50px}.match-expression-row>div>input[data-v-083aa154]{min-height:40px!important}.match-expression-header-matching[data-v-083aa154],.match-expression-row-matching[data-v-083aa154]{grid-template-columns:1fr 1fr 1fr 1fr}.match-expression-header-matching[data-v-083aa154]:not(.view),.match-expression-row-matching[data-v-083aa154]:not(.view){grid-template-columns:1fr 1fr 1fr 1fr 100px}",""]),t["default"]=n},82307:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".password[data-v-42f8c304]{display:flex;flex-direction:column}.password .labeled-input .addon[data-v-42f8c304]{padding-left:12px;min-width:65px}.password .genPassword[data-v-42f8c304]{display:flex;justify-content:flex-end}",""]),t["default"]=n},52723:function(e,t,a){"use strict";a.r(t);var o=a(36758),s=a.n(o),l=a(40935),r=a.n(l),n=r()(s());n.push([e.id,".addon.with-tooltip[data-v-26d12f1c]{position:relative;right:30px}",""]),t["default"]=n},154:function(e,t,a){"use strict";var o=a(931);t.A={computed:{conditions(){return this.value?.conditions||[]},readyCondition(){return(0,o.cy)(this.conditions)?(0,o.jq)(this.conditions,"type","Ready")||{}:this.conditions.Ready},schedulableCondition(){return(0,o.cy)(this.conditions)?(0,o.jq)(this.conditions,"type","Schedulable")||{}:this.conditions.Schedulable}}}},72477:function(e,t,a){"use strict";a.d(t,{J:function(){return o}});const o={OPAQUE:"Opaque",SERVICE_ACCT:"kubernetes.io/service-account-token",DOCKER_JSON:"kubernetes.io/dockerconfigjson",BASIC:"kubernetes.io/basic-auth",SSH:"kubernetes.io/ssh-auth",TLS:"kubernetes.io/tls",BOOTSTRAP:"bootstrap.kubernetes.io/token",ISTIO_TLS:"istio.io/key-and-cert",HELM_RELEASE:"helm.sh/release.v1",FLEET_CLUSTER:"fleet.cattle.io/cluster-registration-values",CLOUD_CREDENTIAL:"provisioning.cattle.io/cloud-credential",RKE_AUTH_CONFIG:"rke.cattle.io/auth-config"}},6314:function(e,t,a){var o=a(24373);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("314e1e20",o,!0,{sourceMap:!1,shadowMode:!1})},84388:function(e,t,a){var o=a(19044);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("32886c2c",o,!0,{sourceMap:!1,shadowMode:!1})},38239:function(e,t,a){var o=a(67647);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("9e59092a",o,!0,{sourceMap:!1,shadowMode:!1})},27461:function(e,t,a){var o=a(34213);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("05d24086",o,!0,{sourceMap:!1,shadowMode:!1})},71157:function(e,t,a){var o=a(67381);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("df2188a2",o,!0,{sourceMap:!1,shadowMode:!1})},9729:function(e,t,a){var o=a(47905);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("5e97709f",o,!0,{sourceMap:!1,shadowMode:!1})},89982:function(e,t,a){var o=a(87582);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("6b7d4a78",o,!0,{sourceMap:!1,shadowMode:!1})},49091:function(e,t,a){var o=a(61251);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("809c828a",o,!0,{sourceMap:!1,shadowMode:!1})},24504:function(e,t,a){var o=a(53976);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("0619618a",o,!0,{sourceMap:!1,shadowMode:!1})},95802:function(e,t,a){var o=a(10458);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("25f49549",o,!0,{sourceMap:!1,shadowMode:!1})},76002:function(e,t,a){var o=a(93154);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("544a1bd1",o,!0,{sourceMap:!1,shadowMode:!1})},67775:function(e,t,a){var o=a(9471);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("1e49de93",o,!0,{sourceMap:!1,shadowMode:!1})},67493:function(e,t,a){var o=a(87301);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("a828b32c",o,!0,{sourceMap:!1,shadowMode:!1})},22403:function(e,t,a){var o=a(82307);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("5a77ab69",o,!0,{sourceMap:!1,shadowMode:!1})},16403:function(e,t,a){var o=a(52723);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var s=a(74825).A;s("231e8794",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.4.0.umd.min.326.js.map